(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2b231626"],{"1d08":function(t,e,a){"use strict";a("8dc7")},"329b":function(t,e,a){"use strict";a("d3b7"),a("96cf");var n=a("1da1");e["a"]={methods:{mixinResetFields:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form";this.$refs[t]&&this.$refs[t].resetFields()},mixinValidate:function(){var t=arguments,e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:"form",a.abrupt("return",new Promise((function(t){e.$refs[n].validate((function(e){if(!e)return t(!1),!1;t(!0)}))})));case 2:case"end":return a.stop()}}),a)})))()}}}},3361:function(t,e,a){},"35b8":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"d",(function(){return s})),a.d(e,"f",(function(){return o})),a.d(e,"c",(function(){return c})),a.d(e,"g",(function(){return l})),a.d(e,"e",(function(){return u})),a.d(e,"b",(function(){return d}));var n=a("bc3a"),i=a.n(n);function r(t){var e="/sell";return i.a.post(e,t)}function s(t){var e="/sell";return i.a.put(e,t)}function o(t){var e="/sell/search";return i.a.post(e,t)}function c(t){var e="/sell";return i.a.delete(e,{data:t})}function l(t){var e="/sell/forecast";return i.a.post(e,t)}function u(t){var e="/sell/expect/"+t;return i.a.get(e,{query:{}})}function d(t){var e="/sell/expect";return i.a.post(e,t)}},6612:function(t,e,a){"use strict";a("99af"),a("b0c0"),a("96cf");var n=a("1da1"),i=a("5530"),r=a("6c6e"),s=a("2f62"),o={irr:{component:"IRRElement",name:"内部收益率分析IRR",height:805},dcf:{component:"DCFElement",name:"现金流折现分析DCF",height:529},dbfx:{component:"DBFXElement",name:"杜邦分析DUPONT",height:1109},"risk-value":{component:"RiskValueElement",height:565,data:{wacc:{title:"加权资本成本分析WACC"},capm:{title:"资本资产定价分析CAPM"},beta:{title:"贝塔系数分析Beta"},unleveredBeta:{title:"剔除财务杠杆风险系数分析UBeta"},erp:{title:"股票风险溢价分析ERP"}}},forecast:{component:"ForecastElement",name:"AI销售预测",height:792},finance:{component:"FinanceForecastElement",name:"财报预测",height:485}},c=a("c598");e["a"]={data:function(){return{materialLoading:!1}},computed:Object(i["a"])({mixinBiLike:function(){var t=this.mixinGetBiMaterialId(),e=this.materialData[t];return e},mixinFinanceLike:function(){var t=this.mixinGetFinanceMaterialId(),e=this.materialData[t];return e},mixinForecastLike:function(){var t=this.mixinGetForecastMaterialId(),e=this.materialData[t];return e},mixinFinaceForecastLike:function(){var t=this.mixinGetFinanceForecastMaterialId(),e=this.materialData[t];return e}},Object(s["c"])(["userInfo","materialData"])),methods:Object(i["a"])({mixinAddBiMaterial:function(){var t=this.mixinCreateBiVnode(this.queryData);this.saveMaterialTap(t)},mixinAddFinanceMaterial:function(){var t=this.mixinCreateFinanceVnode(o[this.$options.name]);this.saveMaterialTap(t)},mixinAddForecastMaterial:function(){var t=this.mixinCreateForecastVnode(o[this.$options.name]);this.saveMaterialTap(t)},mixinAddFinanceForecastMaterial:function(){var t=this.mixinCreateFinanceForecastVnode(o[this.$options.name]);this.saveMaterialTap(t)},mixinCreateBiVnode:function(t){var e=t.hideIndustry?"":"收入比同本行业趋势对比",a="".concat(t.name).concat(e,"（").concat(t.repName,"）"),n={type:"bi",externalId:"BiElement",createdBy:this.userInfo.id,title:a,extra:{mId:this.mixinGetBiMaterialId(),data:{reportType:t.reportType,name:t.name,indexId:t.indexId},style:{height:470}}};return n.extra=JSON.stringify(n.extra),n},mixinGetBiMaterialId:function(){var t=this.queryData;return"m-".concat(t.reportType,"-").concat(t.indexId)},mixinCreateFinanceVnode:function(t){var e="",a="";this.type&&(e=t.data,a=e[this.type].title);var n="risk-value"===this.$options.name?a:t.name,i={type:"bi",externalId:t.component,createdBy:this.userInfo.id,title:n,extra:{mId:this.mixinGetFinanceMaterialId(),data:{type:this.type},style:{height:t.height}}};return i.extra=JSON.stringify(i.extra),i},mixinGetFinanceMaterialId:function(){var t=this.$options.name,e="";return e="risk-value"!==t?t:this.type,e},mixinCreateForecastVnode:function(t){var e=t.name,a={type:"bi",externalId:t.component,createdBy:this.userInfo.id,title:e,extra:{mId:this.mixinGetForecastMaterialId(),data:{mForecast:this.forecast,mDateText:this.dateText,mForecastRate:this.forecastRate},style:{height:t.height}}};return a.extra=JSON.stringify(a.extra),a},mixinGetForecastMaterialId:function(){return this.$options.name},mixinCreateFinanceForecastVnode:function(t){var e=t.name,a={type:"forecastFinance",externalId:t.component,createdBy:this.userInfo.id,title:e,extra:{mId:this.mixinGetFinanceForecastMaterialId(),data:{fExtendColumn:this.extendColumn,fPdata:this.pdata,fGoalData:this.goalData,fDateText:this.dateText,fLoading:this.loading,fYear:this.year},style:{height:t.height}}};return a.extra=JSON.stringify(a.extra),a},mixinGetFinanceForecastMaterialId:function(){return this.$options.name},saveMaterialTap:function(t){this.materialLoading||this._apiAddResourceTpl(t)},_apiAddResourceTpl:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.materialLoading=!0,a.next=4,Object(r["c"])(t);case 4:e.$message({type:"success",message:"操作成功"}),c["a"].$emit("changeMaterialData"),e.asyncSetMaterialData(),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:e.materialLoading=!1;case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()}},Object(s["b"])(["asyncSetMaterialData"]))}},"8dc7":function(t,e,a){},"8fc4":function(t,e,a){},a4d3d:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"finance"},[a("div",{staticClass:"f-header"},[a("div",{staticClass:"g-app-title-1"},[t._v(" 阿尔法财AI预测：下一个报告期-2021四季度财报 ")]),a("div",{staticClass:"date-text"},[t._v(t._s(t.dateText))]),a("div",{staticClass:"submit"},[a("el-popover",{attrs:{width:"200",trigger:"hover"}},[a("span",{staticClass:"info-text"},[t._v("对比目标计划，看AI预测：公司将会超额完成 / 持平 / 不及预期？")]),a("i",{directives:[{name:"theme-color-text",rawName:"v-theme-color-text"}],staticClass:"icon el-icon-question",attrs:{slot:"reference"},slot:"reference"})]),a("div",{staticClass:"parent"},[a("el-button",{staticClass:"aim-btn",attrs:{type:"primary",disabled:!t.year,size:"mini"},on:{click:t.showModal}},[t._v("填写目标计划")]),a("CustomSave",{attrs:{like:t.mixinFinaceForecastLike},on:{saveTap:t.mixinAddFinanceForecastMaterial}})],1)],1)]),a("TableList",{ref:"table",attrs:{tLoading:t.loading,extendColumn:t.extendColumn,pdata:t.pdata,goalData:t.goalData,type:"profit",showInfo:""}}),a("AddgoalModal",{ref:"modal",attrs:{companyInfo:t.yanshiInfo},on:{success:t.queryGoalTap}})],1)},i=[],r=a("5530"),s=a("2f62"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bus-table"},[a("div",{staticClass:"bus-t-title-box"},[a("div",{staticClass:"bus-t-title"},[a("span",[t._v(t._s(t.title))]),a("span",{staticClass:"date"},[t._v(t._s(t.dateText))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.showInfo,expression:"showInfo"}],staticClass:"bus-t-info"},[a("span",[t._v("注：超过目标，显示此标志")]),a("i",{staticClass:"g-span-success icon el-icon-top g-margin-right-24"}),a("span",[t._v("不及预期，显示此标志")]),a("i",{staticClass:"g-span-error icon el-icon-bottom g-margin-right-12"})])]),a("div",{directives:[{name:"g-loading",rawName:"v-g-loading",value:t.tLoading,expression:"tLoading"}],staticClass:"g-map-loading g-relative bus-table-content"},[a("FlexTableBussiness",{attrs:{disabled:"profit"!==t.type,readOnly:"",data:t.data,column:t.column,extendColumn:t.extendColumn}})],1)])},c=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"g-no-data",rawName:"v-g-no-data",value:t.column.length<=2,expression:"column.length <= 2"}],staticClass:"app-flex-table",attrs:{"g-has-text":"true","g-loading-text":"暂无销售数据，请录入销售数据后查看！"}},[a("div",{staticClass:"left-div",on:{mouseenter:function(e){return t.mouseenter("left")}}},[a("div",{staticClass:"left-div1"},[t._v("项目")]),a("div",{ref:"moveTopEl",staticClass:"left-div2",on:{scroll:t.moveLeft}},t._l(t.data,(function(e){return a("div",{key:e.id,class:["left-table2",e.changes?"":"bold"]},[a("pre",[t._v(t._s(e.name))])])})),0)]),a("div",{staticClass:"right-div",on:{mouseenter:function(e){return t.mouseenter("right")}}},[a("div",{ref:"moveLeftEl",staticClass:"right-div1"},[t._l(t.topLeft,(function(e){return a("div",{key:e.key,staticClass:"right-div1-item"},[t._v(" "+t._s(e.title)+" ")])})),a("div",{staticStyle:{width:"10px"}})],2),a("div",{ref:"right2",staticClass:"right-div2 nice-scroll",class:[t.disabled?"disabled":""],on:{scroll:t.move}},[a("div",[a("div",t._l(t.data,(function(e){return a("div",{key:e.id},[e.changes?a("div",{staticClass:"right-div2-table"},t._l(t.topLeft,(function(n,i){return a("div",{key:n.key,staticClass:"right-div2-table-item"},[a("span",[t._v(t._s(t.formatValue(e.changes[n.key]))+" ")]),a("i",{directives:[{name:"show",rawName:"v-show",value:!i&&e.goal,expression:"!vdex && item.goal"}],staticClass:"vicon",class:[e.goal>e.changes[n.key]?"el-icon-bottom g-span-error":"el-icon-top g-span-success"]})])})),0):a("div",{staticClass:"right-div2-table-blank"})])})),0)])])])])},u=[],d=(a("fb6a"),a("f348")),f={props:{column:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},edite:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},format:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},data:function(){return{}},computed:{topLeft:function(){return this.column.slice(2)},rWidth:function(){var t=this.column.length-2;return t>0?150*t+100:0}},methods:{mouseenter:function(t){this.enterType=t},move:function(t){if("left"!==this.enterType){this.leftEl||(this.leftEl=this.$refs.moveLeftEl),this.topEl||(this.topEl=this.$refs.moveTopEl);var e=t.target.scrollLeft,a=t.target.scrollTop;this.leftEl.style.transform="translateX(".concat(-e,"px)"),this.topEl.scrollTop=a}},moveLeft:function(t){if("right"!==this.enterType){this.topEl2||(this.topEl2=this.$refs.right2);var e=t.target.scrollTop;this.topEl2.scrollTop=e}},formatValue:function(t){return this.format?""===t||null===t?"":Object(d["f"])(t):t}}},m=f,p=(a("e60a"),a("2877")),h=Object(p["a"])(m,l,u,!1,null,"472467a0",null),v=h.exports,g=(a("99af"),a("b0c0"),a("ac1f"),a("5319"),a("96cf"),a("1da1")),b=a("b85c"),x=a("cd05"),y={props:{type:{type:String,default:"profit"},pdata:{type:Array,default:function(){return[]}},goalData:{type:Object,default:function(){return{}}},extendColumn:{type:Array,default:function(){return[]}}},data:function(){return{newdebtData:[],newdebt:null,newprofit:null,newprofitData:[],newcash:null,newcashData:[],newothersData:[],newothers:null,loading:!1}},computed:{tableColunm:function(){return this.column.slice(2)}},methods:{queryTap:function(){this.getXlsx2data()},getXlsx2data:function(){this._apiGetFinanceTempalte({type:this.type})},getFinanceData:function(){},formatDataList:function(t){this._dataList=[],this.deepDataList(t.children,this._dataList,0),this.formatData()},deepDataList:function(t,e,a){if(t.length>0){var n,i=this.deepPrefix(a),r=Object(b["a"])(t);try{for(r.s();!(n=r.n()).done;){var s=n.value;e.push({name:"".concat(i).concat(s.name),columnName:s.columnName.toLocaleLowerCase(),changes:"class"===s.type?null:{}}),Array.isArray(s.children)&&s.children.length>0&&this.deepDataList(s.children,e,++a)}}catch(o){r.e(o)}finally{r.f()}}},deepPrefix:function(t){for(var e="",a=0;a<t;a++)e+=" ";return e},formatData:function(){if(this._dataList){var t,e=[{title:"项目",key:"name",width:354},{title:"行次",key:"lineTime",width:100}],a=Object(b["a"])(this.pdata);try{for(a.s();!(t=a.n()).done;){var n=t.value;e.push({title:n.year.replace(/_/,"年")+"季度",key:n.year})}}catch(m){a.e(m)}finally{a.f()}for(var i=e.length-2;i<this.extendColumn.length;i++){var r=this.extendColumn[i];e.push(r)}var s,o=Object(b["a"])(this._dataList);try{for(o.s();!(s=o.n()).done;){var c=s.value;if(c.changes){var l,u=Object(b["a"])(this.pdata);try{for(u.s();!(l=u.n()).done;){var d=l.value;c.changes[d.year]=d[c.columnName]}}catch(m){u.e(m)}finally{u.f()}var f=this.goalData[c.columnName];f&&(c.goal=+f)}}}catch(m){o.e(m)}finally{o.f()}this.column=e,this.data=this._dataList}},transformStr3:function(t){return t.replace(/_(\w)/g,(function(t,e){return e.toUpperCase()}))},_apiGetFinanceTempalte:function(t){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!e[t.type]){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,a.next=5,Object(x["i"])(t);case 5:n=a.sent,e.formatDataList(n),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](2);case 11:case"end":return a.stop()}}),a,null,[[2,9]])})))()}}},w={profit:"利润表",debt:"资产负债表",cash:"现金流量表"},C={mixins:[y],components:{FlexTableBussiness:v},props:{showInfo:{type:Boolean,default:!1},dateText:String,tLoading:Boolean},data:function(){return{column:[],data:[],queryData:{companyId:""}}},computed:Object(r["a"])({title:function(){return w[this.type]}},Object(s["c"])(["yanshiInfo"])),created:function(){this._initUIView()},methods:{_initUIView:function(){this.queryData.companyId=this.yanshiInfo.companyId,this.queryTap()}}},I=C,_=(a("f88b"),Object(p["a"])(I,o,c,!1,null,"b5c0441a",null)),F=_.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("g-modal",{ref:"modal",attrs:{width:"496px",title:t.title},on:{closed:t.closed}},[a("div",{staticClass:"g-change-input-number-box g-el-change-goal-input"},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"110px","label-position":"right",inline:!1,size:"small"}},[a("el-form-item",{attrs:{prop:"income",label:"营业收入："}},[a("el-input",{attrs:{placeholder:"",type:"number"},model:{value:t.form.income,callback:function(e){t.$set(t.form,"income","string"===typeof e?e.trim():e)},expression:"form.income"}},[a("el-select",{staticClass:"input-with-select",attrs:{slot:"append"},slot:"append",model:{value:t.form.incomeUnit,callback:function(e){t.$set(t.form,"incomeUnit",e)},expression:"form.incomeUnit"}},[a("el-option",{attrs:{label:"元",value:"1"}}),a("el-option",{attrs:{label:"万",value:"2"}}),a("el-option",{attrs:{label:"亿",value:"3"}})],1)],1)],1),a("el-form-item",{attrs:{prop:"cost",label:"营业总成本："}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"",type:"number"},model:{value:t.form.cost,callback:function(e){t.$set(t.form,"cost","string"===typeof e?e.trim():e)},expression:"form.cost"}},[a("el-select",{attrs:{slot:"append"},slot:"append",model:{value:t.form.costUnit,callback:function(e){t.$set(t.form,"costUnit",e)},expression:"form.costUnit"}},[a("el-option",{attrs:{label:"元",value:"1"}}),a("el-option",{attrs:{label:"万",value:"2"}}),a("el-option",{attrs:{label:"亿",value:"3"}})],1)],1)],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.hide}},[t._v("取消")]),a("el-button",{attrs:{loading:t.submitLoading,size:"small",type:"primary"},on:{click:t.submitTap}},[t._v("保存")])],1)])},k=[],D=a("35b8"),L=a("329b"),O={mixins:[L["a"]],props:{companyInfo:{type:Object,default:function(){return{}}}},data:function(){return{title:"",form:{income:"",cost:"",incomeUnit:"1",costUnit:"1",id:void 0},rules:{},submitLoading:!1}},created:function(){this._initUIView()},methods:{hide:function(){this.$refs.modal.hide()},show:function(t){var e=t.title,a=t.data;this.mixinResetFields(),this.title="".concat(e,"财务目标计划"),this.initData(a),this.$refs.modal.show()},initData:function(){this.form.income="",this.form.cost=""},closed:function(){this.submitLoading=!1},submitTap:function(){var t=this;return Object(g["a"])(regeneratorRuntime.mark((function e(){var a,n,i,r,s,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.mixinValidate();case 2:a=e.sent,a&&(n=["",1,1e4,1e8],i=n[t.form.incomeUnit],r=t.form.income*i,s=n[t.form.costUnit],o=t.form.cost*s,c={companyId:t.companyInfo.companyId,id:t.form.id,tr:r,toe:o},t._apiAddSellingExpectData(c));case 4:case"end":return e.stop()}}),e)})))()},_initUIView:function(){this._initRules()},_initRules:function(){this.rules={income:[{required:!0,trigger:"blur",message:"营业收入不能为空"}],cost:[{required:!0,trigger:"blur",message:"营业总成本不能为空"}]}},_apiAddSellingExpectData:function(t){var e=this;return Object(g["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(D["b"])(t);case 3:e.$message({type:"success",message:"操作成功"}),e.$emit("success"),e.hide(),a.next=10;break;case 8:a.prev=8,a.t0=a["catch"](0);case 10:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},$=O,j=Object(p["a"])($,T,k,!1,null,"59e157fc",null),M=j.exports,E=a("a8c8"),B=a("6612"),A={name:"finance",mixins:[B["a"]],props:{extendColumn:Array,pdata:Array,goalData:Object,dateText:String,loading:Boolean,year:String},components:{TableList:F,AddgoalModal:M,CustomSave:E["a"]},data:function(){return{}},computed:Object(r["a"])({},Object(s["c"])(["yanshiInfo"])),methods:{formatData:function(){var t=this.$refs.table;t&&t.formatData()},showModal:function(){this.$refs.modal.show({title:this.year})},queryGoalTap:function(){this.$emit("queryGoalTap")}}},R=A,G=(a("ebd9"),Object(p["a"])(R,n,i,!1,null,"f9508506",null));e["a"]=G.exports},a8c8:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-save"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.context,placement:"left"}},[t.like?a("i",{staticClass:"icon el-icon-success",class:[t.like?"like":""]}):a("i",{directives:[{name:"theme-color-text",rawName:"v-theme-color-text"}],ref:"icon",staticClass:"icon el-icon-circle-plus",on:{click:t.itemTap}})])],1)},i=[],r=a("c598"),s={props:{like:{type:Boolean,default:!1}},data:function(){return{}},computed:{context:function(){return this.like?"该模块已添加到报告库中":"点击+号，可将该模块加入到报告库"}},methods:{itemTap:function(){var t=this,e=this.$refs.icon;r["a"].$emit("addAnimate",e),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.$emit("saveTap")}),200)}},beforeDestroy:function(){this.timer&&clearTimeout(this.timer)}},o=s,c=(a("1d08"),a("2877")),l=Object(c["a"])(o,n,i,!1,null,"081b11b7",null);e["a"]=l.exports},ba21:function(t,e,a){},cd05:function(t,e,a){"use strict";a.d(e,"i",(function(){return r})),a.d(e,"e",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"h",(function(){return c})),a.d(e,"d",(function(){return l})),a.d(e,"f",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"g",(function(){return f})),a.d(e,"c",(function(){return m})),a.d(e,"j",(function(){return p}));var n=a("bc3a"),i=a.n(n);function r(t){var e="/query";return i.a.post(e,t)}function s(t){var e="/finance/cash/search";return i.a.post(e,t)}function o(t){var e="/finance/cash";return i.a.post(e,t)}function c(t){var e="/finance/profit/search";return i.a.post(e,t)}function l(t){var e="/finance/profit";return i.a.post(e,t)}function u(t){var e="/finance/debt/search";return i.a.post(e,t)}function d(t){var e="/finance/debt";return i.a.post(e,t)}function f(t){var e="/finance/others/search";return i.a.post(e,t)}function m(t){var e="/finance/others";return i.a.post(e,t)}function p(t){var e="/finance/".concat(t.companyId);return i.a.get(e)}},e60a:function(t,e,a){"use strict";a("8fc4")},ebd9:function(t,e,a){"use strict";a("3361")},f88b:function(t,e,a){"use strict";a("ba21")}}]);