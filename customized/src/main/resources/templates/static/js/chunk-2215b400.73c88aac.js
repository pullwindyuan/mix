(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2215b400"],{"0129":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-page"},[r("div",{staticClass:"user-page-main"},[r("div",{staticClass:"user-content"},[r("div",{staticClass:"user-right"},[r("div",{staticClass:"user-form"},[r("div",{staticClass:"user-form-item"},[r("div",{staticClass:"label"},[e._v("用户名：")]),r("div",{staticClass:"value"},[e._v(e._s(e.userInfo.name))]),r("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:function(t){return e.changeName()}}},[e._v("更改")])],1),r("div",{staticClass:"user-form-item"},[r("div",{staticClass:"label"},[e._v("手机：")]),r("div",{staticClass:"value"},[e._v(e._s(e.userInfo.phone))]),r("span",{staticClass:"warning-txt",on:{click:e.contactFn}},[e._v("如需更改，请联系管理员")])]),r("div",{staticClass:"user-form-item"},[r("div",{staticClass:"label"},[e._v("密码：")]),r("div",{staticClass:"value"},[e._v("******")]),r("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small"},on:{click:e.changePassword}},[e._v("更改")])],1)])])])]),r("ChangePhone",{ref:"phone",on:{submitTap:e.submitTap}}),r("ChangePassword",{ref:"pwd",on:{submitTap:e.submitTap}}),r("ChangeName",{ref:"name",on:{submitTap:e.submitTap}}),r("ModalContact",{ref:"contact"})],1)},a=[],i=(r("b0c0"),r("ac1f"),r("5319"),r("96cf"),r("1da1")),s=r("5530"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("g-modal",{ref:"modal",attrs:{width:"450px",title:"管理员联系方式"}},[r("div",{staticClass:"rech-box"},[r("div",{staticClass:"main"},e._l(e.adminList,(function(t,n){return r("div",{key:n,staticClass:"list"},[e._v(e._s(t.name+"："+t.phone))])})),0)]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.submitTap}},[e._v("我知道了")])],1)])},c=[],u=r("c24f"),l={data:function(){return{adminList:[]}},created:function(){this.queryTap()},methods:{hide:function(){this.$refs.modal.hide()},show:function(){this.$refs.modal.show()},submitTap:function(){this.hide()},queryTap:function(){this._apiGetAdminList()},_apiGetAdminList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u["e"])();case 3:r=t.sent,e.adminList=r,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()}}},f=l,d=(r("d9e8"),r("2877")),m=Object(d["a"])(f,o,c,!1,null,"1a5bdaed",null),p=m.exports,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("g-modal",{ref:"modal",attrs:{width:"496px",title:"更换手机号"},on:{open:e.open,closed:e.closed}},[r("div",[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"85px","label-position":"left",inline:!1,size:"small"}},[r("el-form-item",{attrs:{prop:"phone",label:"新手机号:"}},[r("el-input",{attrs:{placeholder:"请输入新的手机号码",maxlength:11},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),r("el-form-item",{attrs:{prop:"code",label:"验证码:"}},[r("g-verify-code",{ref:"verifyCode",attrs:{placeholder:"请输入验证码",phone:e.form.phone,type:4},on:{getCodeTap:e.getCodeTap},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.hide}},[e._v("取消")]),r("el-button",{attrs:{loading:e.submitLoading,size:"small",type:"primary"},on:{click:e.submitTap}},[e._v("更换")])],1)])},b=[],v=r("329b"),w=r("081a"),g={mixins:[v["a"]],data:function(){return{form:{phone:"",code:""},rules:{},submitLoading:!1}},created:function(){this._initUIView()},methods:{getCodeTap:function(){Object(w["b"])(this.form.phone)?this.$refs.verifyCode._apiSendMsgCodeFn():this.$message({type:"warning",message:"请填写手机号"})},hide:function(){this.$refs.modal.hide()},show:function(e){this.form.phone=e.phone,this.$refs.modal.show()},open:function(){this.mixinResetFields();var e=this.$refs.verifyCode;e&&e.clear()},closed:function(){this.submitLoading=!1},submitTap:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.mixinValidate();case 2:r=t.sent,r&&e.$emit("submitTap",e.form,2);case 4:case"end":return t.stop()}}),t)})))()},_initUIView:function(){this._initRules()},_initRules:function(){this.rules={phone:[{required:!0,validator:Object(w["e"])(),trigger:"blur"}],code:[{required:!0,message:"验证码不能为空",trigger:"blur"}]}},_apiEditePhone:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{t.submitLoading=!0,setTimeout(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.hide();case 1:case"end":return e.stop()}}),e)}))),2e3)}catch(r){}case 1:case"end":return e.stop()}}),e)})))()}}},x=g,_=Object(d["a"])(x,h,b,!1,null,"e2b58558",null),y=_.exports,k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("g-modal",{ref:"modal",attrs:{width:"496px",title:"修改用户姓名"},on:{open:e.open,closed:e.closed}},[r("div",[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"95px","label-position":"left",inline:!1,size:"small"},nativeOn:{submit:function(t){return t.preventDefault(),e.doSomething(t)}}},[r("el-form-item",{attrs:{prop:"name",label:"用户姓名："}},[r("el-input",{attrs:{placeholder:"请输入用户姓名"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.hide}},[e._v("取消")]),r("el-button",{attrs:{loading:e.submitLoading,size:"small",type:"primary"},on:{click:e.submitTap}},[e._v("保存")])],1)])},T=[],C={mixins:[v["a"]],data:function(){return{form:{name:""},rules:{},submitLoading:!1}},created:function(){this._initUIView()},methods:{doSomething:function(){},hide:function(){this.$refs.modal.hide()},show:function(e){this.form.name=e.name,this.$refs.modal.show()},open:function(){},closed:function(){this.submitLoading=!1},submitTap:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.mixinValidate();case 2:r=t.sent,r&&e.$emit("submitTap",e.form);case 4:case"end":return t.stop()}}),t)})))()},_initUIView:function(){this._initRules()},_initRules:function(){this.rules={name:[{required:!0,validator:Object(w["c"])({min:2},"用户姓名"),trigger:"blur"}]}}}},O=C,j=Object(d["a"])(O,k,T,!1,null,"0daca390",null),$=j.exports,R=r("f743"),I=r("a40b"),U=r("2ee0"),P=r("2f62"),E={components:{ChangePhone:y,ChangePassword:R["a"],ChangeName:$,ModalContact:p},data:function(){return{innerVisible:!1,data:{action:"https://upload-z2.qiniup.com/",token:""}}},computed:Object(s["a"])({indateText:function(){if(!this.userInfo.payStatus)return"未开通会员";var e=this.$day.format(this.userInfo.indate);return"".concat(e,"过期")}},Object(P["c"])(["userInfo"])),created:function(){this.queryTap()},methods:Object(s["a"])({contactFn:function(){this.$refs.contact.show()},outTap:function(){this.setUserInfo({}),I["default"].clearToken(),this.$router.replace("/login")},showOrderList:function(){this.$refs.order.show()},uploadSuccess:function(e){this._ref="",this.submitTap({avatar:"https://img.futuremap.com.cn/".concat(e.key)})},backTap:function(){this.$router.back()},changeName:function(){this._ref="name",this.$refs.name.show(this.userInfo)},changePhone:function(){this._ref="phone",this.$refs.phone.show(this.userInfo)},changePassword:function(){this._ref="pwd",this.$refs.pwd.show({data:this.userInfo})},hide:function(){var e=this.$refs[this._ref];e&&e.hide()},submitTap:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(1===t){var r=Object(s["a"])(Object(s["a"])({},this.userInfo),e);this._apiEditUserInfo(r)}else if(2===t){var n={verCode:"",phone:""};n.verCode=e.code,n.phone=e.phone,this._apiUpdatePhone(n)}},queryTap:function(){this._apiGetUserInfo()},_apiEditUserInfo:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(u["d"])(e);case 3:t.queryTap(),t.hide(),r.next=9;break;case 7:r.prev=7,r.t0=r["catch"](0);case 9:case"end":return r.stop()}}),r,null,[[0,7]])})))()},_apiUpdatePhone:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(u["j"])(e);case 3:t.queryTap(),t.hide(),r.next=9;break;case 7:r.prev=7,r.t0=r["catch"](0);case 9:case"end":return r.stop()}}),r,null,[[0,7]])})))()},getFileToken:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(U["e"])("imgUpload");case 3:r=t.sent,e.data.token=r.token,t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))()},_apiGetUserInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u["g"])();case 3:r=t.sent,e.setUserInfo(r),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),e.outTap();case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},Object(P["d"])(["setUserInfo"]))},L=E,q=(r("c87a"),Object(d["a"])(L,n,a,!1,null,"3da9c7bc",null));t["default"]=q.exports},"081a":function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"e",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return o})),r.d(t,"a",(function(){return c}));r("99af"),r("4160"),r("b64b"),r("159b");function n(e){var t=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;return t.test(e)}function a(e){var t=[/[\w\W]{8,16}/,/\d+/,/[a-z]+/,/[A-Z]+/],r=!0;return t.forEach((function(t){if(!t.test(e))return r=!1})),r}function i(e){return e=e||"手机号码格式不正确",function(t,r,a){n(r)?a():a(new Error(e))}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"数据",r=arguments.length>2?arguments[2]:void 0,n="";return function(a,i,s){var o=e.min,c=e.max;r?n=r:(o=o||1,o&&c?n=o===c?"".concat(t,"长度应该为 ").concat(o," 个字符"):"".concat(t,"长度应在 ").concat(o," - ").concat(c," 之间"):o&&(n="".concat(t,"长度最少为 ").concat(o," 个字符"))),i.length<o||c&&i.length>c?s(new Error(n)):s()}}function o(e){return e=e||"密码8～16位必须包含大小写字母和数字",function(t,r,n){var i=a(r);i?n():n(new Error(e))}}function c(e,t,r){return r=r||"两次输入密码不一致!",function(n,a,i){var s=e[t];""===a?i(new Error("请再次输入密码")):a===s?i():i(new Error(r))}}},"2ee0":function(e,t,r){"use strict";r.d(t,"e",(function(){return s})),r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return l}));r("99af"),r("b0c0");var n=r("bc3a"),a=r.n(n),i=r("f121");function s(e){var t="/file/token";return a.a.get(t,{params:{type:e}})}function o(e){var t="/excel/financeTemplate/export?myCompanyId=".concat(e.myCompanyId,"&type=").concat(e.type),r=e.name;return a()({method:"post",url:t,responseType:"blob",name:r})}function c(){var e=i["a"].base_url+"/excel/financeTemplate";return e}function u(e){var t="/excel/downloadTemplate?type=".concat(e.type);return a()({method:"post",url:t,responseType:"blob",name:e.name})}function l(){var e=i["a"].base_url+"/excel/importExcel";return e}},"329b":function(e,t,r){"use strict";r("d3b7"),r("96cf");var n=r("1da1");t["a"]={methods:{mixinResetFields:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form";this.$refs[e]&&this.$refs[e].resetFields()},mixinValidate:function(){var e=arguments,t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=e.length>0&&void 0!==e[0]?e[0]:"form",r.abrupt("return",new Promise((function(e){t.$refs[n].validate((function(t){if(!t)return e(!1),!1;e(!0)}))})));case 2:case"end":return r.stop()}}),r)})))()}}}},"83cc":function(e,t,r){},b38e:function(e,t,r){},c87a:function(e,t,r){"use strict";r("b38e")},d9e8:function(e,t,r){"use strict";r("83cc")},f743:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("g-modal",{ref:"modal",attrs:{width:"496px",title:"修改密码"},on:{open:e.open,closed:e.closed}},[r("div",[r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px","label-position":"left",inline:!1,size:"small"}},[Number(e.userInfo.id)===Number(e.curUser.id)?r("el-form-item",{attrs:{prop:"oldPassword",label:"旧密码:"}},[r("el-input",{attrs:{placeholder:"请输入您的旧密码",type:"password","show-password":""},model:{value:e.form.oldPassword,callback:function(t){e.$set(e.form,"oldPassword","string"===typeof t?t.trim():t)},expression:"form.oldPassword"}})],1):e._e(),r("el-form-item",{attrs:{prop:"password",label:"新密码:"}},[r("el-input",{attrs:{placeholder:"8-16位大小写字母及数字组合",type:"password","show-password":""},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password","string"===typeof t?t.trim():t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{prop:"rpassword",label:"新密码确认:"}},[r("el-input",{attrs:{placeholder:"8-16位大小写字母及数字组合",type:"password","show-password":""},model:{value:e.form.rpassword,callback:function(t){e.$set(e.form,"rpassword","string"===typeof t?t.trim():t)},expression:"form.rpassword"}})],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:e.hide}},[e._v("取消")]),r("el-button",{attrs:{loading:e.submitLoading,size:"small",type:"primary"},on:{click:e.submitTap}},[e._v("更换")])],1)])},a=[],i=(r("b0c0"),r("96cf"),r("1da1")),s=r("5530"),o=r("329b"),c=r("081a"),u=r("c24f"),l=r("2f62"),f={mixins:[o["a"]],data:function(){return{form:{oldPassword:"",password:"",rpassword:""},rules:{},submitLoading:!1,curUser:{}}},computed:Object(s["a"])({},Object(l["c"])(["userInfo"])),created:function(){this._initUIView()},methods:{hide:function(){this.$refs.modal.hide()},show:function(e){this.curUser=e.data,this.$refs.modal.show()},open:function(){},closed:function(){this.submitLoading=!1},resetForm:function(e){this.$refs[e].resetFields()},submitTap:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.mixinValidate();case 2:r=t.sent,r&&(n={id:e.curUser.id,name:e.curUser.name,phone:e.curUser.phone,roleIds:[e.curUser.roleId],positionName:e.curUser.phone||"测试工程师",password:e.form.password,oldPassword:e.form.oldPassword},e.resetForm("form"),e.queryTap(n));case 4:case"end":return t.stop()}}),t)})))()},_initUIView:function(){this._initRules()},_initRules:function(){this.rules={oldPassword:[{required:!0,validator:Object(c["d"])(),trigger:"blur"}],password:[{required:!0,validator:Object(c["d"])(),trigger:"blur"}],rpassword:[{required:!0,validator:Object(c["a"])(this.form,"password"),trigger:"blur"}]}},queryTap:function(e){this._apiEditUserInfo(e)},_apiEditUserInfo:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(u["c"])(e);case 3:t.hide(),r.next=8;break;case 6:r.prev=6,r.t0=r["catch"](0);case 8:case"end":return r.stop()}}),r,null,[[0,6]])})))()}}},d=f,m=r("2877"),p=Object(m["a"])(d,n,a,!1,null,"148af338",null);t["a"]=p.exports}}]);