(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-273e45a4"],{"1d08":function(t,e,a){"use strict";a("8dc7")},6612:function(t,e,a){"use strict";a("99af"),a("b0c0"),a("96cf");var n=a("1da1"),i=a("5530"),r=a("6c6e"),s=a("2f62"),o={irr:{component:"IRRElement",name:"内部收益率分析IRR",height:805},dcf:{component:"DCFElement",name:"现金流折现分析DCF",height:529},dbfx:{component:"DBFXElement",name:"杜邦分析DUPONT",height:1109},"risk-value":{component:"RiskValueElement",height:565,data:{wacc:{title:"加权资本成本分析WACC"},capm:{title:"资本资产定价分析CAPM"},beta:{title:"贝塔系数分析Beta"},unleveredBeta:{title:"剔除财务杠杆风险系数分析UBeta"},erp:{title:"股票风险溢价分析ERP"}}},forecast:{component:"ForecastElement",name:"AI销售预测",height:792},finance:{component:"FinanceForecastElement",name:"财报预测",height:485}},c=a("c598");e["a"]={data:function(){return{materialLoading:!1}},computed:Object(i["a"])({mixinBiLike:function(){var t=this.mixinGetBiMaterialId(),e=this.materialData[t];return e},mixinFinanceLike:function(){var t=this.mixinGetFinanceMaterialId(),e=this.materialData[t];return e},mixinForecastLike:function(){var t=this.mixinGetForecastMaterialId(),e=this.materialData[t];return e},mixinFinaceForecastLike:function(){var t=this.mixinGetFinanceForecastMaterialId(),e=this.materialData[t];return e}},Object(s["c"])(["userInfo","materialData"])),methods:Object(i["a"])({mixinAddBiMaterial:function(){var t=this.mixinCreateBiVnode(this.queryData);this.saveMaterialTap(t)},mixinAddFinanceMaterial:function(){var t=this.mixinCreateFinanceVnode(o[this.$options.name]);this.saveMaterialTap(t)},mixinAddForecastMaterial:function(){var t=this.mixinCreateForecastVnode(o[this.$options.name]);this.saveMaterialTap(t)},mixinAddFinanceForecastMaterial:function(){var t=this.mixinCreateFinanceForecastVnode(o[this.$options.name]);this.saveMaterialTap(t)},mixinCreateBiVnode:function(t){var e=t.hideIndustry?"":"收入比同本行业趋势对比",a="".concat(t.name).concat(e,"（").concat(t.repName,"）"),n={type:"bi",externalId:"BiElement",createdBy:this.userInfo.id,title:a,extra:{mId:this.mixinGetBiMaterialId(),data:{reportType:t.reportType,name:t.name,indexId:t.indexId},style:{height:470}}};return n.extra=JSON.stringify(n.extra),n},mixinGetBiMaterialId:function(){var t=this.queryData;return"m-".concat(t.reportType,"-").concat(t.indexId)},mixinCreateFinanceVnode:function(t){var e="",a="";this.type&&(e=t.data,a=e[this.type].title);var n="risk-value"===this.$options.name?a:t.name,i={type:"bi",externalId:t.component,createdBy:this.userInfo.id,title:n,extra:{mId:this.mixinGetFinanceMaterialId(),data:{type:this.type},style:{height:t.height}}};return i.extra=JSON.stringify(i.extra),i},mixinGetFinanceMaterialId:function(){var t=this.$options.name,e="";return e="risk-value"!==t?t:this.type,e},mixinCreateForecastVnode:function(t){var e=t.name,a={type:"bi",externalId:t.component,createdBy:this.userInfo.id,title:e,extra:{mId:this.mixinGetForecastMaterialId(),data:{mForecast:this.forecast,mDateText:this.dateText,mForecastRate:this.forecastRate},style:{height:t.height}}};return a.extra=JSON.stringify(a.extra),a},mixinGetForecastMaterialId:function(){return this.$options.name},mixinCreateFinanceForecastVnode:function(t){var e=t.name,a={type:"forecastFinance",externalId:t.component,createdBy:this.userInfo.id,title:e,extra:{mId:this.mixinGetFinanceForecastMaterialId(),data:{fExtendColumn:this.extendColumn,fPdata:this.pdata,fGoalData:this.goalData,fDateText:this.dateText,fLoading:this.loading,fYear:this.year},style:{height:t.height}}};return a.extra=JSON.stringify(a.extra),a},mixinGetFinanceForecastMaterialId:function(){return this.$options.name},saveMaterialTap:function(t){this.materialLoading||this._apiAddResourceTpl(t)},_apiAddResourceTpl:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.materialLoading=!0,a.next=4,Object(r["c"])(t);case 4:e.$message({type:"success",message:"操作成功"}),c["a"].$emit("changeMaterialData"),e.asyncSetMaterialData(),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:e.materialLoading=!1;case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()}},Object(s["b"])(["asyncSetMaterialData"]))}},"8da4":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("g-visible-box",{attrs:{minHeight:"420px"}},[a("ItemElement",{attrs:{companyInfo:t.companyInfo,queryData:t.queryData}})],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bi-box"},[a("div",{staticClass:"report-elements-bi-box-title"},[a("span",[t._v(t._s(t.queryData.name))]),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.queryData.hideIndustry,expression:"!queryData.hideIndustry"}]},[t._v("收入比同本行业趋势对比")]),a("span",{directives:[{name:"show",rawName:"v-show",value:t.showNodata,expression:"showNodata"}],staticClass:"no-data"},[t._v("暂时N/A，期待更新...")]),23===t.queryData.indexId&&t.eventsData.length>0?[a("el-popover",{attrs:{"popper-class":"black-popper",placement:"top-start",width:"360",trigger:"hover",content:t.eventsData[0].majorEvent||""}},[a("div",{staticClass:"warning-info",attrs:{slot:"reference"},slot:"reference"},[a("i",{staticClass:"iconfont icon-jinggao"}),a("span",{staticClass:"t"},[t._v("指标异常波动提醒")])])])]:t._e(),a("CustomSave",{attrs:{like:t.mixinBiLike},on:{saveTap:t.mixinAddBiMaterial}})],2),a("div",{directives:[{name:"show",rawName:"v-show",value:!t.showNodata,expression:"!showNodata"}],staticClass:"bi-box-content"},[a("div",{directives:[{name:"g-loading",rawName:"v-g-loading",value:t.loading,expression:"loading"}],staticClass:"bi-box-chart"},[a(t.activeComponent,{tag:"component",attrs:{unit:t.unit,title:t.companyInfo.companyTxt,xdata:t.xdata,data:t.data,dateType:t.isSeason}}),a("div",{staticClass:"tag"},[a("el-button-group",[a("el-button",{staticClass:"btn",class:[t.isSeason?"active":""],attrs:{disabled:!t.yanshiInfo.seasonDataFlag,size:"mini",plain:"",type:"default"},on:{click:function(e){return t.taggleTap(!0)}}},[t._v("季度")]),a("el-button",{staticClass:"btn",class:[t.isSeason?"":"active"],attrs:{disabled:!t.yanshiInfo.yearDataFlag,size:"mini",plain:"",type:"default"},on:{click:function(e){return t.taggleTap(!1)}}},[t._v("年度")])],1)],1)],1),a("div",{staticClass:"bi-box-right"},t._l(t.textList,(function(e,n){return a("p",{key:n,staticClass:"param-info"},[t._v(" "+t._s(e)+" ")])})),0)])])},s=[],o=(a("7db0"),a("d81d"),a("fb6a"),a("b0c0"),a("d3b7"),a("ac1f"),a("1276"),a("96cf"),a("1da1")),c=a("ade3"),u=a("5530"),d=a("a8c8"),l=a("6612"),m=a("1c31"),h=a("f4dd"),p=a("2f62"),f={mixins:[l["a"]],props:{companyInfo:{type:Object,default:function(){return{}}},queryData:{type:Object,default:function(){return{}}}},components:{CustomSave:d["a"],BiChart1:function(){return a.e("chunk-0656916b").then(a.bind(null,"1ba9d"))},BiChart2:function(){return a.e("chunk-7ecb1cff").then(a.bind(null,"7327"))},BiChart3:function(){return a.e("chunk-53dd2dfe").then(a.bind(null,"3d7f"))},BiChart4:function(){return a.e("chunk-5a077f46").then(a.bind(null,"0184"))},BiChart5:function(){return a.e("chunk-5b8088e9").then(a.bind(null,"0db7"))},BiChart6:function(){return a.e("chunk-ad826bd6").then(a.bind(null,"f715"))}},data:function(){return{textList:[],data:[],xdata:[],unit:"",activeComponent:"",isSeason:!0,loading:!1,eventsData:[]}},computed:Object(u["a"])({showNodata:function(){var t={J66:!0,J67:!0,J68:!0};return t[this.companyInfo.industryCode]&&this.queryData.hide}},Object(p["c"])(["yanshiInfo"])),created:function(){this._initUIView()},methods:{taggleTap:function(t){this.isSeason=t,this.queryTap()},randomTemplate:function(){var t=Math.round(1*Math.random())+1;this.activeComponent="BiChart".concat(t)},queryTap:function(){var t={compId:this.companyInfo.companyId,compStockCode:this.companyInfo.code,ipoCompFlag:this.companyInfo.unipo?0:1,indexId:this.queryData.indexId,reportType:this.queryData.reportType};this.isSeason?this._apiGetBiIndexQuarter(t):this._apiGetBiIndexAndTextData(t)},formatResdata:function(t){this.eventsData=t.majorEvent;var e=t.years.sort((function(t,e){return t-e})),a=[{name:this.queryData.name,data:t.reportDetail,key:"data"}],n=t.industryData.industryData,i={};this.queryData.hideIndustry||(a.push({name:"行业平均",data:n,key:"avg"}),i=this.getYearNAdata(e));var r=a.map((function(t){var a={name:t.name,data:e.slice()};return a.data=a.data.map((function(e){var a=t.data.find((function(t){return+t.year===+e}));return a?+a[t.key]:i[e]?{value:null,_na:!0}:null})),a}));this.unit=t.indexUnit,this.xdata=e,this.data=r,this.textList=t.summaryContent},formatResdataQuarter:function(t){this.eventsData=t.majorEvent;var e=t.quarters.sort((function(t,e){return t.localeCompare(e)})),a=[{name:this.queryData.name,data:t.reportDetail,key:"data"}],n=t.industryData.industryData,i={};this.queryData.hideIndustry||(a.push({name:"行业平均",data:n,key:"avg"}),i=this.getSeasonNAdataQuarter(e));var r=a.map((function(t){var a={name:t.name,data:e.slice()};return a.data=a.data.map((function(e){var a=t.data.find((function(t){return t.showName===e}));return a?+a[t.key]:i[e]?{value:null,_na:!0}:null})),a}));this.unit=t.indexUnit,this.xdata=e,this.data=r,this.textList=t.summaryContent},getYearNAdata:function(t){var e,a=t[t.length-1];return e={},Object(c["a"])(e,"".concat(a),!0),Object(c["a"])(e,"".concat(a-1),!0),e},getSeasonNAdataQuarter:function(t){var e,a=t[t.length-1],n=a.split("Q")[0];return e={},Object(c["a"])(e,"".concat(n,"Q1"),!0),Object(c["a"])(e,"".concat(n,"Q2"),!0),Object(c["a"])(e,"".concat(n,"Q3"),!0),Object(c["a"])(e,"".concat(n,"Q4"),!0),e},_initUIView:function(){this.isSeason=!!this.yanshiInfo.seasonDataFlag,this.randomTemplate(),this.queryTap()},_apiGetBiIndexAndTextData:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,Object(h["b"])(t);case 4:n=a.sent,e.formatResdata(n),a.next=10;break;case 8:a.prev=8,a.t0=a["catch"](0);case 10:e.loading=!1;case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()},_apiGetBiIndexQuarter:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,a.next=4,Object(m["c"])(t);case 4:n=a.sent,e.formatResdataQuarter(n),a.next=10;break;case 8:a.prev=8,a.t0=a["catch"](0);case 10:e.loading=!1;case 11:case"end":return a.stop()}}),a,null,[[0,8]])})))()}}},v=f,x=(a("a8f9"),a("2877")),y=Object(x["a"])(v,r,s,!1,null,"52eadddd",null),b=y.exports,g={props:{companyInfo:{type:Object,default:function(){return{}}},queryData:{type:Object,default:function(){return{}}}},components:{ItemElement:b},data:function(){return{}}},I=g,C=Object(x["a"])(I,n,i,!1,null,"613fdbfd",null);e["a"]=C.exports},"8dc7":function(t,e,a){},a8c8:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-save"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.context,placement:"left"}},[t.like?a("i",{staticClass:"icon el-icon-success",class:[t.like?"like":""]}):a("i",{directives:[{name:"theme-color-text",rawName:"v-theme-color-text"}],ref:"icon",staticClass:"icon el-icon-circle-plus",on:{click:t.itemTap}})])],1)},i=[],r=a("c598"),s={props:{like:{type:Boolean,default:!1}},data:function(){return{}},computed:{context:function(){return this.like?"该模块已添加到报告库中":"点击+号，可将该模块加入到报告库"}},methods:{itemTap:function(){var t=this,e=this.$refs.icon;r["a"].$emit("addAnimate",e),this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.$emit("saveTap")}),200)}},beforeDestroy:function(){this.timer&&clearTimeout(this.timer)}},o=s,c=(a("1d08"),a("2877")),u=Object(c["a"])(o,n,i,!1,null,"081b11b7",null);e["a"]=u.exports},a8f9:function(t,e,a){"use strict";a("df8e")},df8e:function(t,e,a){}}]);