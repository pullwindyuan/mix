(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bae931b6"],{"1d11":function(t,e,a){"use strict";a("98a5")},"417c":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"crm-page"},[a("div",{staticClass:"g-home-page-header-fixed"},[a("crm",{ref:"header",on:{queryTap:t.submitTap}})],1),a("div",{staticClass:"g-home-page-content"},[a("div",{staticClass:"crm-page-content"},[a("div",{staticClass:"g-h-box"},[a("el-button",{staticClass:"g-margin-right-12 export",attrs:{type:"primary",size:"mini",round:""},on:{click:t.printTap}},[t._v("打印")]),a("VxeColumnTree",{attrs:{data:t.columns},on:{submit:t.changeColumn}}),a("el-button",{staticClass:"export g-margin-left-12",attrs:{type:"default",round:"",size:"mini",disabled:0===t.data.length},on:{click:t.exportFn}},[t._v("导出Excel")])],1),a("div",{directives:[{name:"g-loading",rawName:"v-g-loading",value:t.loading,expression:"loading"}],staticClass:"top-table-box",attrs:{"g-loading-radius":"10"}},[a("g-vxe-grid-list",{ref:"vxe",attrs:{align:"center",headerAlign:"center",data:t.data,total:t.total,columns:t.columns,queryData:t.queryData,showFooter:!0,footerMethod:t.mixinTotalFooterMethodFn,footerCellClassName:t.footerCellClassNameFn},on:{pageChange:t.pageChange}})],1)])])])},i=[],n=(a("b0c0"),a("96cf"),a("1da1")),o=a("5530"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HeaderBox",[a("div",{staticClass:"g-header-form g-page-header-form"},[a("div",{staticClass:"g-form-box"},[a("FormLine",{staticClass:"g-form-box g-form-box-top",attrs:{data:t.topList,bindData:t.queryData}}),a("HeaderControl",{ref:"control",on:{resetTap:t.resetTap,queryTap:t.queryTap,moreTap:t.moreTap}})],1)]),a("div",{attrs:{slot:"more"},slot:"more"},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"g-form-more-box g-header-form g-page-header-form"},t._l(t.formItemList,(function(e,r){return a("FormLine",{key:r,class:0===r?"g-form-box":"g-form-line",attrs:{data:e,bindData:t.queryData}})})),1)])],1)])},c=[],d=(a("4160"),a("159b"),a("edef")),l=a("53eb"),u=a("9840e"),m=a("f348"),f=a("1412"),h=a("a2ac"),p={mixins:[f["a"],h["a"]],components:{HeaderBox:d["a"],HeaderControl:l["a"],FormLine:u["a"]},data:function(){return{queryData:{orderDetailCode:"",custName:"",ddate1:"",ddate2:"",orderValue1:"",orderValue2:"",profitRate1:"",profitRate2:"",companyCode:"",customerCode:"",productCode:""},itemList:[],topList:[],showFlag:!1}},computed:{formItemList:function(){var t=[];return this.itemList.forEach((function(e,a){var r=a/3|0;t[r]||(t[r]=[]),t[r].push(Object(o["a"])({},e))})),t}},created:function(){this._initUIView()},methods:{moreTap:function(){this.showFlag=!this.showFlag},resetTap:function(){var t=this.$refs.control;t&&t.reset(this.queryData)},queryTap:function(){var t=this.fomartReqdata();this.$emit("queryTap",t),this.showFlag=!1},fomartReqdata:function(){return Object(m["c"])(this.queryData)},_initUIView:function(){this._initItemList()},_initItemList:function(){this.topList=[{title:"订单号",type:"input-text",bindKey:"orderDetailCode"},{title:"订单日期",type:"date-picker-between",start:"ddate1",end:"ddate2",endRight:!0},{title:"帐套",style:{width:"200px"},type:"select",options:this.companyOptions,bindKey:"companyCode"}],this.itemList=[{title:"订单金额",start:"orderValue1",end:"orderValue2",type:"input-number-between"},{title:"利润率",start:"profitRate1",end:"profitRate2",type:"input-number-between",pct:!0},{title:"客户",type:"select",style:{marginRight:"20px"},bindKey:"customerCode",options:this.customerList},{title:"产品编码",type:"input-text",bindKey:"productCode"}]}}},g=p,b=a("2877"),C=Object(b["a"])(g,s,c,!1,null,"2f077eb4",null),v=C.exports,y=a("f8b7"),x=a("8b28"),w=a("c5b0"),D=a("ce3b"),_=a("cef6"),O=a("5c52"),T=a("4024"),j={mixins:[x["a"],D["a"],_["a"],O["a"],T["a"]],components:{crm:v},data:function(){return{columns:[],loading:!1,totalFooterCount:[["合计",1918,1943,1122,1314,"-"]],total:0,data:[],totalData:{},pTitle:"CRM"}},created:function(){this._initUIView()},methods:{exportFn:function(){this._params||(this._params={});var t=this.mixinExportFormat([this._params.ddate1,this._params.ddate2],"订单日期");t&&(this._params.name="crm列表.xlsx",Object(y["f"])(this._params))},queryTap:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.headerQuery=t,this._apiOrderCRMList(Object(o["a"])(Object(o["a"])({},t),this.queryData))},getVxeCellStyle:function(t,e){return{headerClassName:t,className:function(t){return t.$rowIndex%2===1?e:""}}},formartResdata:function(t){this.total=t.page.total,this.data=t.page.records,this.totalData=t},footerCellClassNameFn:function(t){var e=t.$rowIndex;t.column,t.columnIndex;if(0===e)return"g-row-purple"},_initUIView:function(){this.queryTap(),this._initColumns()},_initColumns:function(){var t=this,e=this.getVxeCellStyle("g-vxe-header-cell-grey-dark-d","g-vxe-cell-grey-dark");this.columns=[{title:"账套",field:"companyCode",minWidth:138,formatter:function(t){var e=t.row;return w["a"][e.companyCode]}},{title:"组别",field:"cdepName",minWidth:138},{title:"订单号",field:"orderDetailCode",minWidth:138},{title:"订单日期",field:"ddate",minWidth:138,formatter:function(e){var a=e.row;return t.$day.format(a.ddate)}},{title:"客户名称",field:"customerName",minWidth:138},{title:"订单金额",field:"orderValue",minWidth:138},{title:"产品名称",field:"productName",minWidth:138},{title:"产品编码",field:"productCode",minWidth:138},{title:"报价",headerClassName:"g-vxe-header-cell-white-dark",children:[Object(o["a"])({title:"材料成本",field:"materialCost",minWidth:138},e),Object(o["a"])({title:"人工成本",field:"laborCost",minWidth:138},e),Object(o["a"])({title:"制造费用",field:"manufactureCost",minWidth:138},e),Object(o["a"])({title:"船务费用",field:"shippingCost",minWidth:138},e),Object(o["a"])({title:"管理费用",field:"mgrCost",minWidth:138},e),Object(o["a"])({title:"退税前利润",field:"profit",minWidth:138},e)]},{title:"回款",headerClassName:"g-vxe-header-cell-grey-dark",children:[Object(o["a"])({title:"金额",field:"returnAmount",minWidth:138},e),Object(o["a"])({title:"应回款日期",field:"returnPlanDate",minWidth:138,formatter:function(e){var a=e.row;return t.$day.format(a.returnPlanDate)}},e),Object(o["a"])({title:"回款收到日期",field:"returnDate",minWidth:138,formatter:function(e){var a=e.row;return t.$day.format(a.returnDate)}},e)]},{title:"利润率",field:"profitRate",minWidth:138,formatter:function(e){var a=e.row;return t.$pct(a.profitRate)}}]},_apiOrderCRMList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,e._params=JSON.parse(JSON.stringify(t)),a.next=5,Object(y["t"])(t);case 5:r=a.sent,e.formartResdata(r),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:e.loading=!1;case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()}}},q=j,R=(a("1d11"),Object(b["a"])(q,r,i,!1,null,"45d40b45",null));e["default"]=R.exports},"5c52":function(t,e,a){"use strict";a("99af"),a("d81d"),a("fb6a");var r=a("2909"),i=a("f348");e["a"]={data:function(){return{footerData:[],printTotalData:{}}},methods:{mixinTotalFooterMethodFn:function(t){var e=this,a=t.columns.slice(1),n={},o=a.map((function(t){var a="".concat(t.property,"H"),r=Object(i["h"])(e.totalData[a]),o=r||0===r?r:"-";return n[t.property]=o,o}));return this.footerData=["合计"].concat(Object(r["a"])(o)),this.printTotalData=n,[this.footerData]}}}},"8b28":function(t,e,a){"use strict";e["a"]={data:function(){return{queryData:{current:1,size:30},data:[],total:0}},methods:{submitTap:function(t){this.queryData.current=1,this.queryTap(t)},pageChange:function(t){this.queryData.current=t,this.queryTap(this._params)},formartResdata:function(t){this.total=t.total,this.data=t.records}}}},"98a5":function(t,e,a){},a2ac:function(t,e,a){"use strict";a("d81d"),a("96cf");var r=a("1da1"),i=a("f8b7");e["a"]={data:function(){return{customerList:[]}},created:function(){this._apiGetCustomerList()},methods:{formatCustomerResData:function(t){t&&t.length>0&&(this.customerList=t.map((function(t){return{value:t.ccus_code,label:t.ccus_name}}))),this._initItemList()},_apiGetCustomerList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i["n"])();case 3:a=e.sent,t.formatCustomerResData(a),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}}}}]);