(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dffc4ee"],{"329b":function(t,e,r){"use strict";r("d3b7"),r("96cf");var i=r("1da1");e["a"]={methods:{mixinResetFields:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form";this.$refs[t]&&this.$refs[t].resetFields()},mixinValidate:function(){var t=arguments,e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=t.length>0&&void 0!==t[0]?t[0]:"form",r.abrupt("return",new Promise((function(t){e.$refs[i].validate((function(e){if(!e)return t(!1),!1;t(!0)}))})));case 2:case"end":return r.stop()}}),r)})))()}}}},"3de0":function(t,e,r){"use strict";r("99af"),r("4de4"),r("4160"),r("159b");var i=r("2909");e["a"]={methods:{mixinFormatValue:function(t){var e=this,r=JSON.parse(JSON.stringify(t)),a=[].concat(Object(i["a"])(this.itemList),Object(i["a"])(this.topList)).filter((function(t){return t.pct})),o=["start","end","bindKey"];return a.forEach((function(t){o.forEach((function(i){var a=t[i];a&&r[a]&&(r[a]=e.$Num.Div(r[a],100))}))})),r}}}},"459d":function(t,e,r){"use strict";r("865e")},"865e":function(t,e,r){},cd68:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"move-page"},[r("div",{staticClass:"g-home-page-header-fixed"},[r("HeaderMoveLib",{on:{queryTap:t.submitTap}})],1),r("div",{staticClass:"g-home-page-content"},[r("div",{staticClass:"move-page-content"},[r("div",{staticClass:"h-box"},[r("el-button",{staticClass:"add",attrs:{type:"default",size:"mini",round:""},on:{click:t.addTap}},[t._v(" 新增 ")]),r("el-button",{staticClass:"download",attrs:{type:"default",size:"mini",round:""},on:{click:t.downloadTap}},[t._v(" 下载挪货模版 ")]),r("g-upload",{attrs:{action:t.uploadAction},on:{"before-upload":t.beforeUpload,"on-success":t.success,progress:t.progress,"on-error":t.onError}},[r("el-button",{staticClass:"upload",attrs:{loading:t.uploadLoading,round:"",type:"default",size:"mini"}},[t._v(t._s(t.uploadLoading?"上传中":"导入挪货记录"))])],1),r("el-button",{staticClass:"export g-margin-left-12",attrs:{type:"default",round:"",size:"mini"},on:{click:t.exportFn}},[t._v("导出Excel")])],1),r("div",{directives:[{name:"g-loading",rawName:"v-g-loading",value:t.loading,expression:"loading"}],staticClass:"top-table-box",attrs:{"g-loading-radius":"10"}},[r("g-vxe-table-list",{ref:"vxe",attrs:{align:"center",headerAlign:"center",data:t.data,total:t.total,columns:t.columns,queryData:t.queryData},on:{pageChange:t.pageChange}},[r("vxe-column",{attrs:{title:"操作",width:150},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.row;return[r("div",[r("el-button",{staticClass:"c-btn",attrs:{type:"default",size:"mini"},on:{click:function(e){return t.deleteTap(i)}}},[t._v("删除")]),r("el-button",{staticClass:"c-btn",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.edit(i)}}},[t._v("编辑")])],1)]}}])})],1)],1)])]),r("ModalAddEditMove",{ref:"modal",on:{success:t.refresh}}),r("ModalDeleteMove",{ref:"delete",on:{success:function(e){return t.refresh("delete")}}})],1)},a=[],o=(r("b0c0"),r("5530")),n=(r("96cf"),r("1da1")),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("HeaderBox",[r("div",{staticClass:"g-header-form g-page-header-form"},[r("div",{staticClass:"g-form-box"},[r("FormLine",{staticClass:"g-form-box g-form-box-top",attrs:{data:t.topList,bindData:t.queryData}}),r("HeaderControl",{ref:"control",on:{resetTap:t.resetTap,queryTap:t.queryTap,moreTap:t.moreTap}})],1)]),r("div",{attrs:{slot:"more"},slot:"more"},[r("el-collapse-transition",[r("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"g-form-more-box g-header-form g-page-header-form"},t._l(t.formItemList,(function(e,i){return r("FormLine",{key:i,class:0===i?"g-form-box":"g-form-line",attrs:{data:e,bindData:t.queryData}})})),1)])],1)])},c=[],d=(r("4160"),r("159b"),r("edef")),u=r("53eb"),l=r("9840e"),m=r("f348"),p=r("1412"),f=r("3de0"),h={mixins:[p["a"],f["a"]],components:{HeaderBox:d["a"],HeaderControl:u["a"],FormLine:l["a"]},data:function(){return{queryData:{orderDetailCode:"",orderNumber:"",productCode:"",ddmonth:"",orderSwitch:"",orderNumberSwitch:""},itemList:[],topList:[],showFlag:!1}},computed:{formItemList:function(){var t=[];return this.itemList.forEach((function(e,r){var i=r/3|0;t[i]||(t[i]=[]);var a=e.type?e.type:"input-number-between";t[i].push(Object(o["a"])(Object(o["a"])({},e),{},{type:a}))})),t}},created:function(){this._initUIView()},methods:{moreTap:function(){this.showFlag=!this.showFlag},resetTap:function(){var t=this.$refs.control;t&&t.reset(this.queryData)},queryTap:function(){var t=this.fomartReqdata();this.$emit("queryTap",t),this.showFlag=!1},fomartReqdata:function(){var t=Object(m["c"])(this.queryData);return t.ddmonth&&(t.ddmonth=this.$day.dayjs(t.ddmonth).format("YYYYMM")),t=this.mixinFormatValue(t),t},_initUIView:function(){this._initItemList()},_initItemList:function(){this.topList=[{title:"订单号",type:"input-text",bindKey:"orderDetailCode"},{title:"订单行号",type:"input-text",bindKey:"orderNumber"},{title:"月份",type:"date-picker",bindKey:"ddmonth",class:{"g-form-item-right":!0,"g-form-date":!0},props:{type:"month"}}],this.itemList=[{title:"挪货订单号",type:"input-text",bindKey:"orderSwitch"},{title:"挪货订单行号",type:"input-text",bindKey:"orderNumberSwitch"},{title:"存货编码",type:"input-text",bindKey:"productCode"}]}}},b=h,g=r("2877"),v=Object(g["a"])(b,s,c,!1,null,"049a866b",null),w=v.exports,x=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("g-modal",{ref:"modal",attrs:{width:"800px",title:t.title},on:{closed:t.closed}},[r("div",{staticClass:"g-input-number"},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"110px","label-position":"right",inline:!1,size:"small"}},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{prop:"orderDetailCode",label:"订单号："}},[r("el-input",{attrs:{placeholder:"请输入订单号",type:"text"},model:{value:t.form.orderDetailCode,callback:function(e){t.$set(t.form,"orderDetailCode","string"===typeof e?e.trim():e)},expression:"form.orderDetailCode"}})],1),r("el-form-item",{attrs:{prop:"orderCount",label:"挪货数量："}},[r("el-input",{attrs:{placeholder:"请输入订单数量",type:"number"},model:{value:t.form.orderCount,callback:function(e){t.$set(t.form,"orderCount","string"===typeof e?e.trim():e)},expression:"form.orderCount"}})],1),r("el-form-item",{attrs:{prop:"productName",label:"存货名称："}},[r("el-input",{attrs:{placeholder:"请输入存货名称",type:"text"},model:{value:t.form.productName,callback:function(e){t.$set(t.form,"productName","string"===typeof e?e.trim():e)},expression:"form.productName"}})],1),r("el-form-item",{attrs:{prop:"orderSwitch",label:"挪货订单号："}},[r("el-input",{attrs:{placeholder:"请输入挪货订单号",type:"text"},model:{value:t.form.orderSwitch,callback:function(e){t.$set(t.form,"orderSwitch","string"===typeof e?e.trim():e)},expression:"form.orderSwitch"}})],1)],1),r("el-col",{attrs:{span:12,offset:0}},[r("el-form-item",{attrs:{prop:"orderNumber",label:"订单行号："}},[r("el-input",{attrs:{placeholder:"请输入订单行号",type:"number"},model:{value:t.form.orderNumber,callback:function(e){t.$set(t.form,"orderNumber","string"===typeof e?e.trim():e)},expression:"form.orderNumber"}})],1),r("el-form-item",{attrs:{prop:"ddmonth",label:"月份："}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"month",placeholder:"选择月份"},model:{value:t.form.ddmonth,callback:function(e){t.$set(t.form,"ddmonth",e)},expression:"form.ddmonth"}})],1),r("el-form-item",{attrs:{prop:"productCode",label:"存货编码："}},[r("el-input",{attrs:{placeholder:"请输入存货编码",type:"text"},model:{value:t.form.productCode,callback:function(e){t.$set(t.form,"productCode","string"===typeof e?e.trim():e)},expression:"form.productCode"}})],1),r("el-form-item",{attrs:{prop:"orderNumberSwitch",label:"挪货订单行号："}},[r("el-input",{attrs:{placeholder:"请输入挪货订单行号",type:"number"},model:{value:t.form.orderNumberSwitch,callback:function(e){t.$set(t.form,"orderNumberSwitch","string"===typeof e?e.trim():e)},expression:"form.orderNumberSwitch"}})],1)],1)],1)],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:t.hide}},[t._v("取消")]),r("el-button",{attrs:{loading:t.submitLoading,size:"small",type:"primary"},on:{click:t.submitTap}},[t._v("保存")])],1)])},y=[],_=r("329b"),C=r("f8b7"),O={mixins:[_["a"]],data:function(){return{title:"",form:{ddmonth:"",orderDetailCode:"",orderNumber:"",productCode:"",productName:"",invoiceCount:"",orderCount:"",orderSwitch:"",orderNumberSwitch:"",note:""},rules:{},submitLoading:!1}},created:function(){this._initUIView()},methods:{hide:function(){this.$refs.modal.hide()},show:function(t){t||this.mixinResetFields(),this.title=t?"编辑挪货记录":"新增挪货记录",this.initData(t||{}),this.$refs.modal.show()},initData:function(t){this.form=Object(o["a"])({},t)},closed:function(){this.submitLoading=!1},submitTap:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r,i,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.mixinValidate();case 2:if(r=e.sent,!r){e.next=10;break}if(i=t.form.id,a=t.form.ddmonth?t.$day.dayjs(t.form.ddmonth).format("YYYYMM"):"",n=Object(o["a"])(Object(o["a"])({},t.form),{},{ddmonth:a}),i){e.next=9;break}return e.abrupt("return",t._apiAddSwitchOrder(n));case 9:t._apiEditSwitchOrder(n);case 10:case"end":return e.stop()}}),e)})))()},success:function(){this.$message({type:"success",message:"操作成功"}),this.hide(),this.$emit("success")},_initUIView:function(){this._initRules()},_initRules:function(){this.rules={orderDetailCode:[{required:!0,trigger:"blur",message:"订单号不能为空"}]}},_apiAddSwitchOrder:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.submitLoading=!0,r.next=4,Object(C["a"])(t);case 4:e.success(),r.next=9;break;case 7:r.prev=7,r.t0=r["catch"](0);case 9:e.submitLoading=!1;case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},_apiEditSwitchOrder:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.submitLoading=!0,r.next=4,Object(C["e"])(t);case 4:e.success(),r.next=9;break;case 7:r.prev=7,r.t0=r["catch"](0);case 9:e.submitLoading=!1;case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}},k=O,L=Object(g["a"])(k,x,y,!1,null,"1d1ecdea",null),S=L.exports,j=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("g-modal",{ref:"modal",attrs:{width:"496px",title:"温馨提示",iconColor:"#FF9931",icon:"el-icon-warning"}},[r("div",{staticClass:"g-pos-center"},[r("span",[t._v("是否删除挪货记录")])]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:t.hide}},[t._v("取消")]),r("el-button",{attrs:{loading:t.submitLoading,size:"small",type:"primary"},on:{click:t.submitTap}},[t._v("确认")])],1)])},$=[],D={data:function(){return{submitLoading:!1,data:{}}},methods:{hide:function(){this.$refs.modal.hide()},show:function(t){this.data=t,this.$refs.modal.show()},submitTap:function(){this._apiDeleteSwitchOrder({id:this.data.id})},success:function(){this.$message({type:"success",message:"操作成功"}),this.hide(),this.$emit("success")},_apiDeleteSwitchOrder:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.submitLoading=!0,r.next=4,Object(C["b"])(t);case 4:e.success(),r.next=9;break;case 7:r.prev=7,r.t0=r["catch"](0);case 9:e.submitLoading=!1;case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()}}},N=D,T=Object(g["a"])(N,j,$,!1,null,"3d80ca1f",null),q=T.exports,R=r("da9d"),F=r("4024"),E={mixins:[R["a"],F["a"]],components:{ModalAddEditMove:S,ModalDeleteMove:q,HeaderMoveLib:w},data:function(){return{uploadAction:Object(C["H"])(),data:[],total:0,columns:[],queryData:{size:30,current:1},loading:!1}},created:function(){this._initUIView()},methods:{exportFn:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t._params||(t._params={}),r=t.mixinExportFormat(t._params.ddmonth,"月份"),r){e.next=4;break}return e.abrupt("return");case 4:t._params.name="挪货记录.xlsx",Object(C["l"])(t._params);case 6:case"end":return e.stop()}}),e)})))()},addTap:function(){var t=this.$refs.modal;t&&t.show()},edit:function(t){var e=this.$refs.modal;e&&e.show(t)},deleteTap:function(t){var e=this.$refs.delete;e&&e.show(t)},downloadTap:function(){Object(C["G"])({name:"挪货记录上传模版.xlsx"})},pageChange:function(t){this.queryData.current=t,this.queryTap(this._params)},uploadSuccess:function(){this.submitTap({})},submitTap:function(t){this.queryData.current=1,this.queryTap(t)},queryTap:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._apiSwitchOrderList(Object(o["a"])(Object(o["a"])({},t),this.queryData))},refresh:function(t){var e=Object(o["a"])({},this._params);"delete"===t&&this.data.length<=1&&this.queryData.current>1&&(e.current-=1),this._apiSwitchOrderList(e)},formatResdata:function(t){this.total=t.total,this.data=t.records},_initUIView:function(){this._initColumns(),this.queryTap()},_initColumns:function(){this.columns=[{title:"订单号",field:"orderDetailCode",minWidth:138},{title:"订单行号",field:"orderNumber",minWidth:138},{title:"月份",field:"ddmonth",minWidth:138},{title:"挪货数量",field:"orderCount",minWidth:138},{title:"挪货订单号",field:"orderSwitch",minWidth:138},{title:"挪货订单行号",field:"orderNumberSwitch",minWidth:138},{title:"存货名称",field:"productName",minWidth:138},{title:"存货编码",field:"productCode",minWidth:138}]},_apiSwitchOrderList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,e.loading=!0,e._params=JSON.parse(JSON.stringify(t)),r.next=5,Object(C["I"])(t);case 5:i=r.sent,e.formatResdata(i),r.next=11;break;case 9:r.prev=9,r.t0=r["catch"](0);case 11:e.loading=!1;case 12:case"end":return r.stop()}}),r,null,[[0,9]])})))()}}},M=E,z=(r("459d"),Object(g["a"])(M,i,a,!1,null,"7ddefae8",null));e["default"]=z.exports},da9d:function(t,e,r){"use strict";r("96cf");var i=r("1da1"),a=r("f348");e["a"]={data:function(){return{uploadLoading:!1}},methods:{beforeUpload:function(){this.uploadLoading=!0,this.msg=this.$message({type:"success",message:"文件上传中，当前进度：0%",duration:0,offset:75})},progress:function(t){this.msg.message="文件上传中，当前进度：".concat(t,"%")},onError:function(){this.msg.close(),this.uploadLoading=!1},success:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.msg.message="文件上传成功",t.uploadSuccess&&t.uploadSuccess(),e.next=4,Object(a["g"])(1e3);case 4:t.msg.close(),t.uploadLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}}}}}]);