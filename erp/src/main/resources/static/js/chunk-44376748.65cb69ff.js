(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44376748"],{"3de0":function(t,e,a){"use strict";a("99af"),a("4de4"),a("4160"),a("159b");var i=a("2909");e["a"]={methods:{mixinFormatValue:function(t){var e=this,a=JSON.parse(JSON.stringify(t)),r=[].concat(Object(i["a"])(this.itemList),Object(i["a"])(this.topList)).filter((function(t){return t.pct})),n=["start","end","bindKey"];return r.forEach((function(t){n.forEach((function(i){var r=t[i];r&&a[r]&&(a[r]=e.$Num.Div(a[r],100))}))})),a}}}},"3f53":function(t,e,a){},"4a69":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sales-page"},[a("div",{staticClass:"g-home-page-header-fixed"},[a("saleCommission",{ref:"header",on:{queryTap:t.submitTap}})],1),a("div",{staticClass:"g-home-page-content"},[a("div",{staticClass:"sales-page-content"},[a("div",{staticClass:"g-h-box"},[a("el-button",{staticClass:"g-margin-right-12 export",attrs:{type:"primary",size:"mini",round:""},on:{click:t.printTap}},[t._v("打印")]),a("VxeColumnTree",{attrs:{data:t.columns},on:{submit:t.changeColumn}}),a("el-button",{staticClass:"export g-margin-left-12",attrs:{type:"default",round:"",size:"mini",disabled:0===t.data.length},on:{click:t.exportFn}},[t._v("导出Excel")])],1),a("div",{directives:[{name:"g-loading",rawName:"v-g-loading",value:t.loading,expression:"loading"}],staticClass:"top-table-box",attrs:{"g-loading-radius":"10"}},[a("g-vxe-grid-list",{ref:"vxe",attrs:{align:"center",headerAlign:"center",data:t.data,total:t.total,columns:t.columns,queryData:t.queryData,showFooter:!0,footerMethod:t.mixinTotalFooterMethodFn,footerCellClassName:t.footerCellClassNameFn},on:{pageChange:t.pageChange}})],1)])])])},r=[],n=(a("b0c0"),a("96cf"),a("1da1")),o=a("5530"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HeaderBox",[a("div",{staticClass:"g-header-form g-page-header-form"},[a("div",{staticClass:"g-form-box"},[a("FormLine",{staticClass:"g-form-box g-form-box-top",attrs:{data:t.topList,bindData:t.queryData}}),a("HeaderControl",{ref:"control",on:{resetTap:t.resetTap,queryTap:t.queryTap,moreTap:t.moreTap}})],1)]),a("div",{attrs:{slot:"more"},slot:"more"},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"g-form-more-box g-header-form g-page-header-form"},t._l(t.formItemList,(function(e,i){return a("FormLine",{key:i,class:0===i?"g-form-box":"g-form-line",attrs:{data:e,bindData:t.queryData}})})),1)])],1)])},d=[],l=(a("4160"),a("159b"),a("edef")),u=a("53eb"),c=a("9840e"),m=a("f348"),f=a("1412"),p=a("3de0"),h={mixins:[f["a"],p["a"]],components:{HeaderBox:l["a"],HeaderControl:u["a"],FormLine:c["a"]},data:function(){return{queryData:{orderDetailCode:"",saleName:"",ddate1:"",ddate2:"",profitRate1:"",profitRate2:"",orderValue1:"",orderValue2:"",retainedProfit1:"",retainedProfit2:"",profitAmount1:"",profitAmount2:"",companyCode:"",productCode:""},itemList:[],topList:[],showFlag:!1}},computed:{formItemList:function(){var t=[];return this.itemList.forEach((function(e,a){var i=a/3|0;t[i]||(t[i]=[]),t[i].push(Object(o["a"])({},e))})),t}},created:function(){this._initUIView()},methods:{moreTap:function(){this.showFlag=!this.showFlag},resetTap:function(){var t=this.$refs.control;t&&t.reset(this.queryData)},queryTap:function(){var t=this.fomartReqdata();t=this.mixinFormatValue(t),this.$emit("queryTap",t),this.showFlag=!1},fomartReqdata:function(){return Object(m["c"])(this.queryData)},_initUIView:function(){this._initItemList()},_initItemList:function(){this.topList=[{title:"订单号",type:"input-text",bindKey:"orderDetailCode"},{title:"业务员",type:"input-text",bindKey:"saleName"},{title:"下单日期",type:"date-picker-between",start:"ddate1",end:"ddate2"}],this.itemList=[{title:"提点",start:"profitRate1",end:"profitRate2",type:"input-number-between",pct:!0},{title:"订单金额",start:"orderValue1",end:"orderValue2",type:"input-number-between"},{title:"净利润",start:"retainedProfit1",end:"retainedProfit2",type:"input-number-between"},{title:"提成金额",start:"profitAmount1",end:"profitAmount2",type:"input-number-between"},{title:"帐套",style:{width:"200px",marginRight:"20px"},type:"select",options:this.companyOptions,bindKey:"companyCode"},{title:"存货编码",type:"input-text",bindKey:"productCode"}]}}},g=h,b=a("2877"),y=Object(b["a"])(g,s,d,!1,null,"2baa5948",null),v=y.exports,x=a("8b28"),C=a("f8b7"),w=a("c5b0"),T=a("ce3b"),D=a("cef6"),_=a("5c52"),q=a("4024"),F={mixins:[x["a"],T["a"],D["a"],_["a"],q["a"]],components:{saleCommission:v},data:function(){return{columns:[],loading:!1,total:0,data:[],totalData:{},pTitle:"外销提成表"}},created:function(){this._initUIView()},methods:{exportFn:function(){this._params||(this._params={});var t=this.mixinExportFormat([this._params.ddate1,this._params.ddate2],"下单日期");t&&(this._params.name="外销提成表.xlsx",Object(C["k"])(this._params))},queryTap:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.headerQuery=t,this._apiOrderSaleKpiList(Object(o["a"])(Object(o["a"])({},t),this.queryData))},formartResdata:function(t){this.total=t.page.total,this.data=t.page.records,this.totalData=t},footerCellClassNameFn:function(t){var e=t.$rowIndex;t.column,t.columnIndex;if(0===e)return"g-row-purple"},_initUIView:function(){this.queryTap(),this._initColumns()},_initColumns:function(){var t=this;this.columns=[{title:"账套",field:"companyCode",minWidth:138,formatter:function(t){var e=t.row;return w["a"][e.companyCode]}},{title:"订单号",field:"orderDetailCode",minWidth:138},{title:"下单日期",field:"ddate",minWidth:138,formatter:function(e){var a=e.row;return t.$day.format(a.ddate)}},{title:"业务员",field:"saleName",minWidth:138},{title:"客户名",field:"customerName",minWidth:138},{title:"产品编码",field:"productCode",minWidth:138},{title:"产品名称",field:"productName",minWidth:138},{title:"提点",field:"profitRate",minWidth:138,formatter:function(e){var a=e.row;return t.$pct(a.profitRate)}},{title:"下单当月汇率",field:"exchangeRate",minWidth:138},{title:"订单金额",field:"orderValue",minWidth:138},{title:"净利润",field:"retainedProfit",minWidth:138},{title:"本月到账金额",field:"currentAmount",minWidth:138},{title:"提成金额",field:"profitAmount",minWidth:138},{title:"提成占净利比",field:"outAmountRate",minWidth:138,formatter:function(e){var a=e.row;return t.$pct(a.outAmountRate)}},{title:"占提成总额比例",field:"outTotalRate",minWidth:138,formatter:function(e){var a=e.row;return t.$pct(a.outTotalRate)}}]},_apiOrderSaleKpiList:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,e._params=JSON.parse(JSON.stringify(t)),a.next=5,Object(C["B"])(t);case 5:i=a.sent,e.formartResdata(i),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:e.loading=!1;case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()}}},O=F,R=(a("5f96"),Object(b["a"])(O,i,r,!1,null,"60b13d64",null));e["default"]=R.exports},"5c52":function(t,e,a){"use strict";a("99af"),a("d81d"),a("fb6a");var i=a("2909"),r=a("f348");e["a"]={data:function(){return{footerData:[],printTotalData:{}}},methods:{mixinTotalFooterMethodFn:function(t){var e=this,a=t.columns.slice(1),n={},o=a.map((function(t){var a="".concat(t.property,"H"),i=Object(r["h"])(e.totalData[a]),o=i||0===i?i:"-";return n[t.property]=o,o}));return this.footerData=["合计"].concat(Object(i["a"])(o)),this.printTotalData=n,[this.footerData]}}}},"5f96":function(t,e,a){"use strict";a("3f53")},"8b28":function(t,e,a){"use strict";e["a"]={data:function(){return{queryData:{current:1,size:30},data:[],total:0}},methods:{submitTap:function(t){this.queryData.current=1,this.queryTap(t)},pageChange:function(t){this.queryData.current=t,this.queryTap(this._params)},formartResdata:function(t){this.total=t.total,this.data=t.records}}}}}]);