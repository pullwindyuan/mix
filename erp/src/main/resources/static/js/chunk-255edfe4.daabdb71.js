(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-255edfe4"],{"330a":function(t,e,i){},"3de0":function(t,e,i){"use strict";i("99af"),i("4de4"),i("4160"),i("159b");var a=i("2909");e["a"]={methods:{mixinFormatValue:function(t){var e=this,i=JSON.parse(JSON.stringify(t)),n=[].concat(Object(a["a"])(this.itemList),Object(a["a"])(this.topList)).filter((function(t){return t.pct})),r=["start","end","bindKey"];return n.forEach((function(t){r.forEach((function(a){var n=t[a];n&&i[n]&&(i[n]=e.$Num.Div(i[n],100))}))})),i}}}},"5c52":function(t,e,i){"use strict";i("99af"),i("d81d"),i("fb6a");var a=i("2909"),n=i("f348");e["a"]={data:function(){return{footerData:[],printTotalData:{}}},methods:{mixinTotalFooterMethodFn:function(t){var e=this,i=t.columns.slice(1),r={},o=i.map((function(t){var i="".concat(t.property,"H"),a=Object(n["h"])(e.totalData[i]),o=a||0===a?a:"-";return r[t.property]=o,o}));return this.footerData=["合计"].concat(Object(a["a"])(o)),this.printTotalData=r,[this.footerData]}}}},6222:function(t,e,i){"use strict";i("d81d"),i("96cf");var a=i("1da1"),n=i("f8b7");e["a"]={data:function(){return{sellerList:[]}},created:function(){this._apiGetSellerList()},methods:{formatSellerResData:function(t){t&&t.length>0&&(this.sellerList=t.map((function(t){return{value:t.cperson_code,label:t.cperson_name}}))),this._initItemList()},_apiGetSellerList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n["q"])();case 3:i=e.sent,t.formatSellerResData(i),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}}},"715a":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-page"},[i("div",{staticClass:"g-home-page-header-fixed"},[i("OrderCostHeader",{ref:"header",on:{queryTap:t.submitTap}})],1),i("div",{staticClass:"g-home-page-content"},[i("div",{staticClass:"order-page-content"},[i("div",{staticClass:"g-h-box"},[i("el-button",{staticClass:"g-margin-right-12 export",attrs:{type:"primary",size:"mini",round:""},on:{click:t.printTap}},[t._v("打印")]),i("VxeColumnTree",{attrs:{data:t.columns},on:{submit:t.changeColumn}}),i("el-button",{staticClass:"export g-margin-left-12",attrs:{type:"default",round:"",size:"mini",disabled:0===t.data.length},on:{click:t.exportFn}},[t._v("导出Excel")])],1),i("div",{directives:[{name:"g-loading",rawName:"v-g-loading",value:t.loading,expression:"loading"}],staticClass:"top-table-box",attrs:{"g-loading-radius":"10"}},[i("g-vxe-grid-list",{ref:"vxe",attrs:{align:"center",headerAlign:"center",data:t.data,total:t.total,columns:t.columns,queryData:t.queryData,showFooter:!0,footerMethod:t.mixinTotalFooterMethodFn,footerCellClassName:t.footerCellClassNameFn},on:{pageChange:t.pageChange}})],1)])])])},n=[],r=(i("b0c0"),i("96cf"),i("1da1")),o=i("5530"),s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("HeaderBox",[i("div",{staticClass:"g-header-form g-page-header-form"},[i("div",{staticClass:"g-form-box"},[i("FormLine",{staticClass:"g-form-box g-form-box-top",attrs:{data:t.topList,bindData:t.queryData}}),i("HeaderControl",{ref:"control",on:{resetTap:t.resetTap,queryTap:t.queryTap,moreTap:t.moreTap}})],1)]),i("div",{attrs:{slot:"more"},slot:"more"},[i("el-collapse-transition",[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"g-form-more-box g-header-form g-page-header-form"},t._l(t.formItemList,(function(e,a){return i("FormLine",{key:a,class:0===a?"g-form-box":"g-form-line",attrs:{data:e,bindData:t.queryData}})})),1)])],1)])},c=[],u=(i("4160"),i("159b"),i("edef")),l=i("53eb"),d=i("9840e"),m=i("f348"),p=i("3de0"),f=i("1412"),h=i("a5dd"),v=i("a2ac"),g=i("6222"),b={mixins:[f["a"],p["a"],h["a"],v["a"],g["a"]],components:{HeaderBox:u["a"],HeaderControl:l["a"],FormLine:d["a"]},data:function(){return{queryData:{orderDetailCode:"",dmonth:"",companyCode:"",income1:"",income2:"",costSum1:"",costSum2:"",profitSumRadio1:"",profitSumRadio2:"",costTotal1:"",costTotal2:"",profitRadio1:"",profitRadio2:"",orderNumber:"",ccusCode:"",cvenCode:"",cpersonCode:"",cinvcode:""},itemList:[],topList:[],showFlag:!1}},computed:{formItemList:function(){var t=[];return this.itemList.forEach((function(e,i){var a=i/3|0;t[a]||(t[a]=[]);var n=e.type?e.type:"input-number-between";t[a].push(Object(o["a"])(Object(o["a"])({},e),{},{type:n}))})),t}},created:function(){this._initUIView()},methods:{moreTap:function(){this.showFlag=!this.showFlag},resetTap:function(){var t=this.$refs.control;t&&t.reset(this.queryData)},queryTap:function(){var t=this.fomartReqdata();this.$emit("queryTap",t),this.showFlag=!1},fomartReqdata:function(){var t=Object(m["c"])(this.queryData);return t.dmonth&&(t.dmonth=this.$day.dayjs(t.dmonth).format("YYYYMM")),t=this.mixinFormatValue(t),t},_initUIView:function(){this._initItemList()},_initItemList:function(){this.topList=[{title:"订单号",type:"input-text",bindKey:"orderDetailCode"},{title:"月份",type:"date-picker",bindKey:"dmonth",class:{"g-form-item-right":!0,"g-form-date":!0},props:{type:"month"}},{title:"收入金额",type:"input-number-between",start:"income1",end:"income2"}],this.itemList=[{title:"成本小计",start:"costSum1",end:"costSum2"},{title:"毛利率小计",start:"profitSumRadio1",end:"profitSumRadio2",pct:!0},{title:"合计成本",start:"costTotal1",end:"costTotal2"},{title:"利润率",start:"profitRadio1",end:"profitRadio2",pct:!0},{title:"帐套",style:{width:"200px",marginRight:"20px"},type:"select",options:this.companyOptions,bindKey:"companyCode"},{title:"订单行号",type:"input-text",bindKey:"orderNumber"},{title:"客户",type:"select",style:{marginRight:"20px"},bindKey:"ccusCode",options:this.customerList},{title:"供应商",type:"select",style:{marginRight:"20px"},bindKey:"cvenCode",options:this.supplierList},{title:"业务员",type:"select",bindKey:"cpersonCode",options:this.sellerList},{title:"存货编码",type:"input-text",bindKey:"cinvcode"}]}}},y=b,x=i("2877"),C=Object(x["a"])(y,s,c,!1,null,"42f9cf84",null),w=C.exports,_=i("f8b7"),L=i("c5b0"),D=i("ce3b"),R=i("cef6"),T=i("5c52"),O=i("4024"),S={mixins:[D["a"],R["a"],T["a"],O["a"]],components:{OrderCostHeader:w},data:function(){return{queryData:{size:30,current:1},data:[],total:0,columns:[],loading:!1,totalData:{},footerData:[],pTitle:"订单成本表"}},created:function(){this._initUIView()},methods:{exportFn:function(){this._params||(this._params={});var t=this.mixinExportFormat(this._params.dmonth,"月份");t&&(this._params.name="订单成本表.xlsx",Object(_["g"])(this._params))},uploadSuccess:function(){this.submitTap({})},submitTap:function(t){this.queryData.current=1,this.headerQuery=t,this.queryTap(t)},pageChange:function(t){this.queryData.current=t,this.queryTap(this._params)},queryTap:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._apiOrderCostList(Object(o["a"])(Object(o["a"])({},t),this.queryData))},formartResdata:function(t){this.total=t.page.total,this.data=t.page.records,this.totalData=t},footerCellClassNameFn:function(t){var e=t.$rowIndex;t.column,t.columnIndex;if(0===e)return"g-row-purple"},_initUIView:function(){this._initColumns(),this.queryTap()},_initPageSize:function(){var t=window.innerHeight-66-48-40-44,e=t/36|0;this.queryData.pageSize=e},_initColumns:function(){var t=this;this.columns=[{title:"账套",field:"companyCode",minWidth:138,formatter:function(t){var e=t.row;return L["a"][e.companyCode]}},{title:"月份",field:"dmonth",minWidth:138},{title:"订单号",headerAlign:"center",align:"left",field:"orderDetailCode",minWidth:138},{title:"订单行号",field:"orderNumber",minWidth:138},{title:"名称",field:"cinvname",minWidth:138,headerAlign:"center",align:"left"},{title:"收入金额",field:"income",minWidth:138,vI18n:!0},{title:"采购材料成本",field:"materialCost",minWidth:138,vI18n:!0},{title:"成本小计",field:"costSum",minWidth:138,vI18n:!0},{title:"毛利小计",field:"profitSum",minWidth:138,vI18n:!0},{title:"制造费用",field:"manufactureCost",minWidth:138,vI18n:!0},{title:"人工费用",field:"laborCost",minWidth:138,vI18n:!0},{title:"毛利率小计",field:"profitSumRadio",minWidth:138,formatter:function(e){var i=e.row;return t.$pct(i.profitSumRadio)}},{title:"管理费用",field:"mgrCost",minWidth:138,vI18n:!0},{title:"营业费用",field:"runCost",minWidth:138,vI18n:!0},{title:"合计成本",field:"costTotal",minWidth:138,vI18n:!0},{title:"利润",field:"profit",minWidth:138,vI18n:!0},{title:"利润率",field:"profitRadio",minWidth:138,formatter:function(e){var i=e.row;return t.$pct(i.profitRadio)}},{title:"发票号",field:"invoiceId",minWidth:138}],this.$vxeI18n(this.columns)},_apiOrderCostList:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function i(){var a;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.prev=0,e.loading=!0,e._params=JSON.parse(JSON.stringify(t)),i.next=5,Object(_["v"])(t);case 5:a=i.sent,e.formartResdata(a),i.next=11;break;case 9:i.prev=9,i.t0=i["catch"](0);case 11:e.loading=!1;case 12:case"end":return i.stop()}}),i,null,[[0,9]])})))()}}},I=S,q=(i("f79a"),Object(x["a"])(I,a,n,!1,null,"e0a0ed8c",null));e["default"]=q.exports},a2ac:function(t,e,i){"use strict";i("d81d"),i("96cf");var a=i("1da1"),n=i("f8b7");e["a"]={data:function(){return{customerList:[]}},created:function(){this._apiGetCustomerList()},methods:{formatCustomerResData:function(t){t&&t.length>0&&(this.customerList=t.map((function(t){return{value:t.ccus_code,label:t.ccus_name}}))),this._initItemList()},_apiGetCustomerList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n["n"])();case 3:i=e.sent,t.formatCustomerResData(i),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}}},a5dd:function(t,e,i){"use strict";i("d81d"),i("96cf");var a=i("1da1"),n=i("f8b7");e["a"]={data:function(){return{supplierList:[]}},created:function(){this._apiGetSupplierList()},methods:{formatSupplierData:function(t){t&&t.length>0&&(this.supplierList=t.map((function(t){return{label:t.cven_name,value:t.cven_code}}))),this._initItemList()},_apiGetSupplierList:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n["r"])();case 3:i=e.sent,t.formatSupplierData(i),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))()}}}},f79a:function(t,e,i){"use strict";i("330a")}}]);