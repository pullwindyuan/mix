(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d089678"],{"3de0":function(t,e,a){"use strict";a("99af"),a("4de4"),a("4160"),a("159b");var i=a("2909");e["a"]={methods:{mixinFormatValue:function(t){var e=this,a=JSON.parse(JSON.stringify(t)),n=[].concat(Object(i["a"])(this.itemList),Object(i["a"])(this.topList)).filter((function(t){return t.pct})),o=["start","end","bindKey"];return n.forEach((function(t){o.forEach((function(i){var n=t[i];n&&a[n]&&(a[n]=e.$Num.Div(a[n],100))}))})),a}}}},4039:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"quoted-page"},[a("div",{staticClass:"g-home-page-header-fixed"},[a("QuotedCompare",{ref:"header",on:{queryTap:t.submitTap}})],1),a("div",{staticClass:"g-home-page-content"},[a("div",{staticClass:"quoted-page-content"},[a("div",{staticClass:"g-h-box"},[a("el-button",{staticClass:"g-margin-right-12 export",attrs:{type:"primary",size:"mini",round:""},on:{click:t.printTap}},[t._v("打印")]),a("div",{staticClass:"upload-box"},[a("g-upload",{attrs:{action:t.uploadAction},on:{"before-upload":t.beforeUpload,"on-success":t.success,progress:t.progress,"on-error":t.onError}},[a("el-button",{staticClass:"upload",attrs:{loading:t.uploadLoading,round:"",type:"default",size:"mini"}},[t._v("导入报价表")])],1)],1),a("VxeColumnTree",{attrs:{data:t.columns},on:{submit:t.changeColumn}}),a("el-button",{staticClass:"export g-margin-left-12",attrs:{type:"default",round:"",size:"mini",disabled:0===t.data.length},on:{click:t.exportFn}},[t._v("导出Excel")])],1),a("div",{directives:[{name:"g-loading",rawName:"v-g-loading",value:t.loading,expression:"loading"}],staticClass:"top-table-box",attrs:{"g-loading-radius":"10"}},[a("g-vxe-grid-list",{ref:"vxe",attrs:{align:"center",headerAlign:"center",data:t.data,total:t.total,columns:t.columns,queryData:t.queryData,showFooter:!0,footerMethod:t.mixinTotalFooterMethodFn,footerCellClassName:t.footerCellClassNameFn},on:{pageChange:t.pageChange}})],1)])])])},n=[],o=(a("99af"),a("4160"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),r=a("5530"),s=a("2909"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("HeaderBox",[a("div",{staticClass:"g-header-form g-page-header-form"},[a("div",{staticClass:"g-form-box"},[a("FormLine",{staticClass:"g-form-box g-form-box-top",attrs:{data:t.topList,bindData:t.queryData}}),a("HeaderControl",{ref:"control",on:{resetTap:t.resetTap,queryTap:t.queryTap,moreTap:t.moreTap}})],1)]),a("div",{attrs:{slot:"more"},slot:"more"},[a("el-collapse-transition",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"g-form-more-box g-header-form g-page-header-form"},t._l(t.formItemList,(function(e,i){return a("FormLine",{key:i,class:0===i?"g-form-box":"g-form-line",attrs:{data:e,bindData:t.queryData}})})),1)])],1)])},l=[],d=a("edef"),u=a("53eb"),m=a("9840e"),f=a("f348"),p=a("3de0"),h=a("1412"),g={mixins:[p["a"],h["a"]],components:{HeaderBox:d["a"],HeaderControl:u["a"],FormLine:m["a"]},data:function(){return{queryData:{csocode:"",cinvcode:"",startDate:"",endDate:"",minQuotationCost:"",maxQuotationCost:"",minDiffRadio:"",maxDiffRadio:"",minActualCost:"",maxActualCost:"",companyCode:"",irowno:""},itemList:[],topList:[],showFlag:!1}},computed:{formItemList:function(){var t=[];return this.itemList.forEach((function(e,a){var i=a/3|0;t[i]||(t[i]=[]),t[i].push(Object(r["a"])({},e))})),t}},created:function(){this._initUIView()},methods:{moreTap:function(){this.showFlag=!this.showFlag},resetTap:function(){var t=this.$refs.control;t&&t.reset(this.queryData)},queryTap:function(){var t=this.fomartReqdata();t=this.mixinFormatValue(t),this.$emit("queryTap",t),this.showFlag=!1},fomartReqdata:function(){return Object(f["c"])(this.queryData)},_initUIView:function(){this._initItemList()},_initItemList:function(){this.topList=[{title:"订单号",type:"input-text",bindKey:"csocode"},{title:"存货编码",type:"input-text",bindKey:"cinvcode"},{title:"日期",type:"date-picker-between",start:"startDate",end:"endDate"}],this.itemList=[{title:"实际成本",start:"minActualCost",end:"maxActualCost",type:"input-number-between"},{title:"报价成本",start:"minQuotationCost",end:"maxQuotationCost",type:"input-number-between"},{title:"差异率",start:"minDiffRadio",end:"maxDiffRadio",type:"input-number-between",pct:!0},{title:"帐套",style:{width:"200px",marginRight:"20px"},type:"select",options:this.companyOptions,bindKey:"companyCode"},{title:"订单行号",type:"input-text",bindKey:"irowno"}]}}},b=g,v=a("2877"),x=Object(v["a"])(b,c,l,!1,null,"75121261",null),y=x.exports,C=a("f8b7"),w=a("da9d"),O=a("c5b0"),j=a("ce3b"),D=a("cef6"),T=a("5c52"),q=a("4024"),_={mixins:[w["a"],j["a"],D["a"],T["a"],q["a"]],components:{QuotedCompare:y},data:function(){return{uploadAction:Object(C["D"])(),queryData:{size:30,current:1},data:[],total:0,columns:[],loading:!1,pTitle:"报价对比表",totalData:{}}},created:function(){this._initUIView()},methods:{printTap:function(){var t=this.mixinPrintRows(),e=this.mixinsTotalRows();e.rows.forEach((function(t){t.parent&&(t.label="".concat(t.label,"(").concat(t.parent,")"))}));var a={title:this.pTitle,rows:[{key:"printTitle",width:100}].concat(Object(s["a"])(t.rows),Object(s["a"])(e.rows)),data:Object(r["a"])(Object(r["a"])({printTitle:this.pTitle},t.data),e.data),labelWidth:130};this.$bus.$emit("print-table",a)},exportFn:function(){this._params||(this._params={});var t=this.mixinExportFormat([this._params.startDate,this._params.endDate],"日期");t&&(this._params.name="报价对比表.xlsx",Object(C["j"])(this._params))},pageChange:function(t){this.queryData.current=t,this.queryTap(this._params)},uploadSuccess:function(){this.submitTap({})},submitTap:function(t){this.queryData.current=1,this.queryTap(t)},queryTap:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.headerQuery=t,this._apiQuotationTotalList(Object(r["a"])(Object(r["a"])({},t),this.queryData))},getVxeCellStyle:function(t,e){return{headerClassName:t,className:function(t){return t.$rowIndex%2===1?e:""}}},formatResdata:function(t){this.total=t.page.total,this.data=t.page.records,this.totalData=t},footerCellClassNameFn:function(t){var e=t.$rowIndex;t.column,t.columnIndex;if(0===e)return"g-row-purple"},_initUIView:function(){this._initColumns(),this.queryTap()},_initColumns:function(){var t=this,e=this.getVxeCellStyle("g-vxe-header-cell-grey-dark-d","g-vxe-cell-grey-dark"),a=this.getVxeCellStyle("g-vxe-header-cell-grey-d","g-vxe-cell-grey");this.columns=[{title:"账套",field:"companyCode",minWidth:138,formatter:function(t){var e=t.row;return O["a"][e.companyCode]}},{title:"订单号",field:"csocode",minWidth:138},{title:"行号",field:"irowno",minWidth:138},{title:"日期",field:"ddate",minWidth:138,formatter:function(e){var a=e.row;return t.$day.format(a.ddate)}},{title:"存货编码",field:"cinvcode",minWidth:138},{title:"存货名称",field:"cinvname",minWidth:138},{title:"报价",headerClassName:"g-vxe-header-cell-grey-dark",children:[Object(r["a"])({title:"材料成本",field:"quotationMaterialCost",minWidth:138},e),Object(r["a"])({title:"人工成本",field:"quotationLaborCost",minWidth:138},e),Object(r["a"])({title:"制造费用",field:"quotationManufactureCost",minWidth:138},e),Object(r["a"])({title:"船务费用",field:"quotationShippingCost",minWidth:138},e),Object(r["a"])({title:"管理费用",field:"quotationMgrCost",minWidth:138},e),Object(r["a"])({title:"退税前利润",field:"quotationProfit",minWidth:138},e)]},{title:"实际",headerClassName:"g-vxe-header-cell-grey",children:[Object(r["a"])({title:"材料成本",field:"materialCost",minWidth:138},a),Object(r["a"])({title:"人工成本",field:"laborCost",minWidth:138},a),Object(r["a"])({title:"制造费用",field:"manufactureCost",minWidth:138},a),Object(r["a"])({title:"船务费用",field:"shippingCost",minWidth:138},a),Object(r["a"])({title:"管理费用",field:"mgrCost",minWidth:138},a),Object(r["a"])({title:"退税前利润",field:"profit",minWidth:138},a)]},{title:"报价单价",field:"quotationUnitprice",minWidth:138},{title:"实际成本",field:"actualCost",minWidth:138},{title:"报价成本",field:"quotationCost",minWidth:138},{title:"差异",field:"diff",minWidth:138},{title:"差异率",field:"diffRadio",minWidth:138,formatter:function(e){var a=e.row;return t.$pct(a.diffRadio)}}]},_apiQuotationTotalList:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.loading=!0,e._params=JSON.parse(JSON.stringify(t)),a.next=5,Object(C["E"])(t);case 5:i=a.sent,e.formatResdata(i),a.next=11;break;case 9:a.prev=9,a.t0=a["catch"](0);case 11:e.loading=!1;case 12:case"end":return a.stop()}}),a,null,[[0,9]])})))()}}},W=_,L=(a("c318"),Object(v["a"])(W,i,n,!1,null,"9fe3f45a",null));e["default"]=L.exports},"54c4":function(t,e,a){},"5c52":function(t,e,a){"use strict";a("99af"),a("d81d"),a("fb6a");var i=a("2909"),n=a("f348");e["a"]={data:function(){return{footerData:[],printTotalData:{}}},methods:{mixinTotalFooterMethodFn:function(t){var e=this,a=t.columns.slice(1),o={},r=a.map((function(t){var a="".concat(t.property,"H"),i=Object(n["h"])(e.totalData[a]),r=i||0===i?i:"-";return o[t.property]=r,r}));return this.footerData=["合计"].concat(Object(i["a"])(r)),this.printTotalData=o,[this.footerData]}}}},c318:function(t,e,a){"use strict";a("54c4")},da9d:function(t,e,a){"use strict";a("96cf");var i=a("1da1"),n=a("f348");e["a"]={data:function(){return{uploadLoading:!1}},methods:{beforeUpload:function(){this.uploadLoading=!0,this.msg=this.$message({type:"success",message:"文件上传中，当前进度：0%",duration:0,offset:75})},progress:function(t){this.msg.message="文件上传中，当前进度：".concat(t,"%")},onError:function(){this.msg.close(),this.uploadLoading=!1},success:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.msg.message="文件上传成功",t.uploadSuccess&&t.uploadSuccess(),e.next=4,Object(n["g"])(1e3);case 4:t.msg.close(),t.uploadLoading=!1;case 6:case"end":return e.stop()}}),e)})))()}}}}}]);