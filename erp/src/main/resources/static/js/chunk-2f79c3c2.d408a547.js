(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f79c3c2"],{"081a":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return c}));n("99af"),n("4160"),n("b64b"),n("159b");function a(e){var t=/^[1][3,4,5,6,7,8,9][0-9]{9}$/;return t.test(e)}function i(e){var t=[/[\w\W]{8,16}/,/\d+/,/[a-z]+/,/[A-Z]+/],n=!0;return t.forEach((function(t){if(!t.test(e))return n=!1})),n}function r(e){return e=e||"手机号码格式不正确",function(t,n,i){a(n)?i():i(new Error(e))}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"数据",n=arguments.length>2?arguments[2]:void 0,a="";return function(i,r,s){var o=e.min,c=e.max;n?a=n:(o=o||1,o&&c?a=o===c?"".concat(t,"长度应该为 ").concat(o," 个字符"):"".concat(t,"长度应在 ").concat(o," - ").concat(c," 之间"):o&&(a="".concat(t,"长度最少为 ").concat(o," 个字符"))),r.length<o||c&&r.length>c?s(new Error(a)):s()}}function o(e){return e=e||"密码8～16位必须包含大小写字母和数字",function(t,n,a){var r=i(n);r?a():a(new Error(e))}}function c(e,t,n){return n=n||"两次输入密码不一致!",function(a,i,r){var s=e[t];""===i?r(new Error("请再次输入密码")):i===s?r():r(new Error(n))}}},"329b":function(e,t,n){"use strict";n("d3b7"),n("96cf");var a=n("1da1");t["a"]={methods:{mixinResetFields:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"form";this.$refs[e]&&this.$refs[e].resetFields()},mixinValidate:function(){var e=arguments,t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.length>0&&void 0!==e[0]?e[0]:"form",n.abrupt("return",new Promise((function(e){t.$refs[a].validate((function(t){if(!t)return e(!1),!1;e(!0)}))})));case 2:case"end":return n.stop()}}),n)})))()}}}},"467e":function(e,t,n){"use strict";n("b781")},5252:function(e,t,n){},5990:function(e,t,n){"use strict";n("a65b")},6262:function(e,t,n){"use strict";n("5252")},"6e15":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"role-page"},[n("div",{staticClass:"role-content"},[n("div",{staticClass:"role-content-left"},[n("RoleMenu",{on:{roleTap:e.roleTap}})],1),n("div",{staticClass:"role-content-right"},[n("RoleTable",{ref:"power"})],1)])])},i=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"left-menu"},[n("div",{staticClass:"role-header"},[n("div",{staticClass:"btn",on:{click:e.addTap}},[n("i",{staticClass:"font_family icon-tianjia g-margin-right-8 g-font-14"}),n("span",[e._v("添加用户角色")])])]),n("div",{staticClass:"role-menu"},[n("div",{staticClass:"role-menu-header"},[e._v("用户角色列表")]),n("div",{staticClass:"role-menu-list"},e._l(e.data,(function(t){return n("div",{key:t.id,staticClass:"role-menu-item",class:[t.id===e.active.id?"active":""],on:{click:function(n){return e.menuTap(t)}}},[n("div",{staticClass:"name"},[e._v(e._s(t.roleDesc))]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.id===e.active.id&&"superadmin"!==t.roleName,expression:"item.id === active.id && item.roleName !== 'superadmin'"}],staticClass:"icon font_family icon-bianji g-font-14",on:{click:function(n){return n.stopPropagation(),e.editTap(t)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.id===e.active.id&&"superadmin"!==t.roleName,expression:"item.id === active.id && item.roleName !== 'superadmin'"}],staticClass:"icon font_family icon-shanchu g-font-14",on:{click:function(n){return n.stopPropagation(),e.deleteTap(t)}}})])})),0)]),n("AddEditRole",{ref:"modal",on:{submitSuccess:e.queryTap}}),n("DeleteRole",{ref:"delete",on:{submitSuccess:e.deleteSuccess}})],1)},s=[],o=(n("c740"),n("a434"),n("96cf"),n("1da1")),c=n("5530"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g-modal",{ref:"modal",attrs:{width:"496px",title:e.title},on:{closed:e.closed}},[n("div",[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"80px","label-position":"left",inline:!1,size:"small"}},[n("el-form-item",{attrs:{prop:"roleDesc",label:"角色名称"}},[n("el-input",{attrs:{placeholder:"请输入角色名称"},model:{value:e.form.roleDesc,callback:function(t){e.$set(e.form,"roleDesc","string"===typeof t?t.trim():t)},expression:"form.roleDesc"}})],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.hide}},[e._v("取消")]),n("el-button",{attrs:{loading:e.submitLoading,size:"small",type:"primary"},on:{click:e.submitTap}},[e._v("保存")])],1)])},u=[],d=n("329b"),f=n("081a"),m=n("c24f"),h={mixins:[d["a"]],data:function(){return{title:"",form:{roleName:"",roleDesc:""},rules:{},submitLoading:!1}},created:function(){this._initUIView()},methods:{hide:function(){this.$refs.modal.hide()},show:function(e){var t=e.title,n=e.data;this.mixinResetFields(),this.title=t||"添加角色",this.initData(n),this.$refs.modal.show()},initData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.form.roleDesc=e.roleDesc||"",this.form.roleName=e.roleName,this.form.id=e.id||null},closed:function(){this.submitLoading=!1},submitTap:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.mixinValidate();case 2:n=t.sent,n&&(e.form.id?e._apiEditRole(Object(c["a"])(Object(c["a"])({},e.form),{},{roleDesc:e.form.roleDesc})):e._apiAddRole({roleName:e.form.roleDesc,roleDesc:e.form.roleDesc}));case 4:case"end":return t.stop()}}),t)})))()},_initUIView:function(){this._initRules()},_initRules:function(){this.rules={roleName:[{required:!0,validator:Object(f["c"])({min:2},"角色名称"),trigger:"blur"}]}},_apiAddRole:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.submitLoading=!0,n.next=4,Object(m["a"])([e]);case 4:t.hide(),t.$emit("submitSuccess"),n.next=10;break;case 8:n.prev=8,n.t0=n["catch"](0);case 10:t.submitLoading=!1;case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},_apiEditRole:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.submitLoading=!0,n.next=4,Object(m["e"])([e]);case 4:t.hide(),t.$emit("submitSuccess"),n.next=10;break;case 8:n.prev=8,n.t0=n["catch"](0);case 10:t.submitLoading=!1;case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()}}},v=h,p=n("2877"),b=Object(p["a"])(v,l,u,!1,null,"41a5bda7",null),g=b.exports,w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("g-modal",{ref:"modal",attrs:{width:"496px",title:"温馨提示",iconColor:"#FF9931",icon:"el-icon-warning"},on:{closed:e.closed}},[n("div",{staticClass:"g-pos-center"},[n("span",[e._v("请确认是否删除")]),n("span",{staticClass:"g-span-info"},[e._v(" "+e._s(e.data.roleName)+" ")]),n("span",[e._v("角色？")])]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:e.hide}},[e._v("取消")]),n("el-button",{attrs:{loading:e.submitLoading,size:"small",type:"primary"},on:{click:e.submitTap}},[e._v("确认")])],1)])},x=[],_={data:function(){return{submitLoading:!1,data:{}}},methods:{hide:function(){this.$refs.modal.hide()},show:function(e){var t=e.data;this.data=t,this.$refs.modal.show()},submitTap:function(){this._apiDeleteRole(this.data)},closed:function(){this.submitLoading=!1},_apiDeleteRole:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.submitLoading=!0,n.next=4,Object(m["c"])([e]);case 4:t.$emit("submitSuccess"),t.hide(),n.next=10;break;case 8:n.prev=8,n.t0=n["catch"](0);case 10:t.submitLoading=!1;case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()}}},R=_,k=Object(p["a"])(R,w,x,!1,null,"109bf14c",null),C=k.exports,T=n("2f62"),D={components:{AddEditRole:g,DeleteRole:C},data:function(){return{active:{},data:[]}},computed:Object(c["a"])({},Object(T["b"])(["userInfo"])),created:function(){this._initUIView()},methods:{addTap:function(){var e=this.$refs.modal;e&&e.show({})},editTap:function(e){var t=this.$refs.modal;t&&t.show({title:"编辑角色",data:e})},menuTap:function(e){this.active=e,this.$emit("roleTap",e)},deleteTap:function(e){var t=this.$refs.delete;t&&t.show({data:e})},deleteSuccess:function(){var e=this,t=this.data.findIndex((function(t){return t.id===e.active.id}));this.data.splice(t,1),this.menuTap(this.data[0])},queryTap:function(){this._apiGetRoleList({})},_initUIView:function(){this.first=!0,this.queryTap()},_apiGetRoleList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(m["i"])(e);case 3:a=n.sent,t.data=a,t.first&&(t.menuTap(a[0]),t.first=!1),n.next=10;break;case 8:n.prev=8,n.t0=n["catch"](0);case 10:case"end":return n.stop()}}),n,null,[[0,8]])})))()}}},$=D,j=(n("467e"),Object(p["a"])($,r,s,!1,null,"0b20b836",null)),y=j.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"c-right"},[n("div",{staticClass:"role-header"},[n("el-button",{staticClass:"btn",attrs:{type:"primary",size:"small",loading:e.loading||e.saveLoading},on:{click:e.saveTap}},[e._v(" 保存")])],1),n("div",{staticClass:"role-table g-change-check-box"},[n("div",{staticClass:"role-table-header"},[e._v("表单权限配置")]),n("div",{directives:[{name:"g-loading",rawName:"v-g-loading",value:e.loading,expression:"loading"}],staticClass:"role-table-list vxe-box g-change-vxe-table"},[n("vxe-table",{attrs:{border:"",height:"auto","auto-resize":"",data:e.data,"header-row-class-name":e.getHeaderRowClassName,"row-class-name":e.getRowClassName}},[n("vxe-table-column",{attrs:{field:"name",title:"菜单权限",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("div",[n("el-checkbox",{attrs:{"true-label":1,"false-label":0,indeterminate:!1},model:{value:a.status,callback:function(t){e.$set(a,"status",t)},expression:"row.status"}},[e._v(" "+e._s(a.name)+" ")])],1)]}}])}),n("vxe-table-column",{attrs:{title:"可见列表项","header-align":"center","min-width":"397"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("div",e._l(a.columnDtoList,(function(t){return n("div",{key:t.tableName},e._l(t.columns,(function(t,a){return n("el-checkbox",{key:t.id+"-"+a,attrs:{indeterminate:!1,"true-label":1,"false-label":0},model:{value:t.status,callback:function(n){e.$set(t,"status",n)},expression:"item.status"}},[e._v(e._s(t.columnName))])})),1)})),0)]}}])}),e._e()],1)],1)])])},L=[],N={data:function(){return{active:{},data:[],loading:!0,saveLoading:!1}},methods:{saveTap:function(){this._apiUpdateRoleDetail(this.sdata)},getHeaderRowClassName:function(){return"g-vxe-table-header"},getRowClassName:function(e){if(e.$rowIndex%2===1)return"g-vxe-stripe-row"},queryTap:function(e){this._apiGetRoleDetailList(e)},getSaveData:function(){return this.data},formatResdata:function(e){var t=e[0];this.data=t.roleResource.resourceDtoList,this.sdata=t},_apiGetRoleDetailList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.loading=!0,n.next=4,Object(m["h"])(e);case 4:a=n.sent,t.formatResdata(a),n.next=10;break;case 8:n.prev=8,n.t0=n["catch"](0);case 10:t.loading=!1;case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))()},_apiUpdateRoleDetail:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,t.saveLoading=!0,n.next=4,Object(m["n"])(e);case 4:t.$message({type:"success",message:"操作成功"}),n.next=9;break;case 7:n.prev=7,n.t0=n["catch"](0);case 9:t.saveLoading=!1;case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}}},E=N,S=(n("5990"),Object(p["a"])(E,O,L,!1,null,"20ac8770",null)),I=S.exports,A={components:{RoleMenu:y,RoleTable:I},data:function(){return{activeRole:{},powerList:[]}},methods:{roleTap:function(e){this.activeRole=e;var t=this.$refs.power;t&&t.queryTap(e)},saveTap:function(){if(this.activeRole.id){var e=this.$refs.power;e&&e.getSaveData()}},addTap:function(){}}},z=A,q=(n("6262"),Object(p["a"])(z,a,i,!1,null,"03799b16",null));t["default"]=q.exports},a434:function(e,t,n){"use strict";var a=n("23e7"),i=n("23cb"),r=n("a691"),s=n("50c4"),o=n("7b0b"),c=n("65f0"),l=n("8418"),u=n("1dde"),d=n("ae40"),f=u("splice"),m=d("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,v=Math.min,p=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!f||!m},{splice:function(e,t){var n,a,u,d,f,m,g=o(this),w=s(g.length),x=i(e,w),_=arguments.length;if(0===_?n=a=0:1===_?(n=0,a=w-x):(n=_-2,a=v(h(r(t),0),w-x)),w+n-a>p)throw TypeError(b);for(u=c(g,a),d=0;d<a;d++)f=x+d,f in g&&l(u,d,g[f]);if(u.length=a,n<a){for(d=x;d<w-a;d++)f=d+a,m=d+n,f in g?g[m]=g[f]:delete g[m];for(d=w;d>w-a+n;d--)delete g[d-1]}else if(n>a)for(d=w-a;d>x;d--)f=d+a-1,m=d+n-1,f in g?g[m]=g[f]:delete g[m];for(d=0;d<n;d++)g[d+x]=arguments[d+2];return g.length=w-a+n,u}})},a65b:function(e,t,n){},b781:function(e,t,n){},c740:function(e,t,n){"use strict";var a=n("23e7"),i=n("b727").findIndex,r=n("44d2"),s=n("ae40"),o="findIndex",c=!0,l=s(o);o in[]&&Array(1)[o]((function(){c=!1})),a({target:"Array",proto:!0,forced:c||!l},{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)}}]);